{"version":3,"file":"web-player-pro-talk.js","sources":["../src/utils/emitter.js","../src/constant/index.js","../node_modules/screenfull/dist/screenfull.js","../src/utils/index.js","../src/utils/resampler.js","../src/utils/arraybuffer.js","../src/utils/g711.js","../src/utils/debug.js","../src/utils/events.js","../src/talk/index.js","../src/jessibuca-talk.js"],"sourcesContent":["export default class Emitter {\n    on(name, fn, ctx) {\n        const e = this.e || (this.e = {});\n        (e[name] || (e[name] = [])).push({fn, ctx});\n        return this;\n    }\n\n    once(name, fn, ctx) {\n        const self = this;\n\n        function listener(...args) {\n            self.off(name, listener);\n            fn.apply(ctx, args);\n        }\n\n        listener._ = fn;\n        return this.on(name, listener, ctx);\n    }\n\n    emit(name, ...data) {\n        const evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n        for (let i = 0; i < evtArr.length; i += 1) {\n            evtArr[i].fn.apply(evtArr[i].ctx, data);\n        }\n        return this;\n    }\n\n    off(name, callback) {\n        const e = this.e || (this.e = {});\n\n        if (!name) {\n            Object.keys(e).forEach((key) => {\n                delete e[key];\n            })\n            delete this.e\n            return;\n        }\n\n        const evts = e[name];\n        const liveEvents = [];\n        if (evts && callback) {\n            for (let i = 0, len = evts.length; i < len; i += 1) {\n                if (evts[i].fn !== callback && evts[i].fn._ !== callback) liveEvents.push(evts[i]);\n            }\n        }\n        if (liveEvents.length) {\n            e[name] = liveEvents;\n        } else {\n            delete e[name];\n        }\n        return this;\n    }\n}\n","// 播放协议\nexport const PLAYER_PLAY_PROTOCOL = {\n    websocket: 1,\n    fetch: 2,\n    hls: 3,\n    webrtc: 4,\n    webTransport: 5,\n}\n\nexport const PLAYER_STREAM_TYPE = {\n    fetch: 'fetch',\n    hls: 'hls',\n    websocket: 'websocket',\n    webrtc: 'webrtc',\n    webTransport: 'webTransport',\n    worker: 'worker',\n}\n\n// 播放\nexport const PLAY_TYPE = {\n    player: \"player\",\n    playbackTF: 'playbackTF',\n}\n\nexport const FILE_SUFFIX = {\n    mp4: 'mp4',\n    webm: 'webm'\n};\n\nexport const DEMUX_TYPE = {\n    flv: 'flv',\n    m7s: 'm7s',\n    hls: 'hls',\n    webrtc: 'webrtc',\n    webTransport: 'webTransport',\n    nakedFlow: 'nakedFlow'\n}\n\nexport const DEMUX_TYPE_SHOW = {\n    flv: 'FLV',\n    m7s: 'm7s',\n    hls: 'HLS',\n    webrtc: 'Webrtc',\n    webTransport: 'WebTransport',\n    nakedFlow: '裸流'\n}\n\nexport const DECODE_TYPE = {\n    mse: 'mse',\n    wcs: 'wcs',\n    offscreen: 'offscreen',\n    wasm: 'wasm',\n    simd: 'simd',\n    webrtc: 'webrtc',\n    hls: 'hls'\n}\n\nexport const RENDER_TYPE = {\n    canvas: 'canvas',\n    video: 'video'\n}\n\nexport const DEBUG_LEVEL = {\n    debug: 'debug',\n    warn: 'warn',\n}\n\nexport const PTZ_ACTIVE_EVENT_TYPE = {\n    click: 'click',\n    mouseDownAndUp: 'mouseDownAndUp',\n}\n\nexport const PLAYER_NAME = 'JessibucaPro'\n\nexport const DEFAULT_PLAYBACK_FORWARD_MAX_RATE_DECODE_IFRAME = 4; // default playback forward max rate decode iframe\n\nexport const MEDIA_SOURCE_UPDATE_END_TIMEOUT = 10 * 1000\n\nexport const DOCUMENT_ONE_SECOND_BUFFER_LENGTH = 60; // default one second buffer length (fps is 25 - 30)\n\nexport const MSE_MAX_DELAY_TIME = 5;// 单位 秒\n\nexport const MSE_DELAY_INCREASE_TIME = 3;// 单位 秒\n\nexport const PLAYER_RESIZE_TIME = 500;\n\nexport const PLAYER_SCROLL_TIME = 200;\n\nexport const FLV_BUFFER_LARGE_SIZE = 1024 * 1024; // 1024kb = 1mb\n\nexport const WASM_DECODE_MAX_DIFF_TIMESTAMP = 1100; // 1s\n\nexport const AUDIO_CHANNEL_MAX = 2; // max support 2 channel\n\nexport const FRAME_TS_MAX_DIFF = 1000 * 60 * 60; // 1 hour\n\nexport const SIMD_H264_DECODE_MAX_WIDTH = 4080;\n\n\nexport const CRYPTO_KEY_URL_PATH = '/crypto/'\n\nexport const DEFAULT_JESSIBUCA_OPTIONS = {\n    url: '',\n    playbackConfig: {},\n    fullscreenWatermarkConfig: {}, // 全屏水印设置。\n    playType: PLAY_TYPE.player,\n    playbackForwardMaxRateDecodeIFrame: DEFAULT_PLAYBACK_FORWARD_MAX_RATE_DECODE_IFRAME,\n    playOptions: {},\n    isLive: true,\n    isMulti: false,\n    isCrypto: false\n}\n\n// default player options\nexport const DEFAULT_PLAYER_OPTIONS = {\n    playType: PLAY_TYPE.player, //\n    container: '',//\n    videoBuffer: 1 * 1000, // 1* 1000ms == 1 second\n    videoBufferDelay: 1 * 1000,// 1 * 1000ms\n    networkDelay: 10 * 1000, //  10 * 1000ms\n    isResize: true, //\n    isFullResize: false, // full resize\n    isFlv: false, // flv\n    isHls: false, // hls（inner）\n    isWebrtc: false,// webrtc (inner)\n    isWebrtcForZLM: false,// webrtc for ZLM (inner)\n    isNakedFlow: false,// 是否是裸流（264、265）\n    debug: false, // debug log\n    debugLevel: DEBUG_LEVEL.warn, // log level\n    debugUuid: '', // debug uuid (inner)\n    isMulti: false,// 是否多实例播放\n    hotKey: false, // 快捷键\n    loadingTimeout: 10, // loading timeout\n    heartTimeout: 10,  // heart timeout\n    timeout: 10, // second\n    pageVisibilityHiddenTimeout: 5 * 60, //   5 * 60  = 5 minute\n    loadingTimeoutReplay: true, // loading timeout replay\n    heartTimeoutReplay: true,// heart timeout replay。\n    loadingTimeoutReplayTimes: 3, // loading timeout replay fail times\n    heartTimeoutReplayTimes: 3, // heart timeout replay fail times\n    heartTimeoutReplayUseLastFrameShow: false, // heart timeout replay use last frame\n    supportDblclickFullscreen: false,\n    showBandwidth: false, //\n    showPerformance: false, // 是否显示性能面板\n    keepScreenOn: true,\n    isNotMute: false,\n    hasAudio: true,\n    hasVideo: true,\n    operateBtns: {\n        fullscreen: false,\n        screenshot: false,\n        play: false,\n        audio: false,\n        record: false,\n        ptz: false,\n        quality: false,\n        zoom: false,\n        close: false,\n        scale: false,\n        performance: false,\n        aiFace: false,\n        aiObject: false,\n        fullscreenFn: null,\n        fullscreenExitFn: null,\n        screenshotFn: null,\n        playFn: null,\n        pauseFn: null,\n        recordFn: null,\n        recordStopFn: null,\n    },\n    extendOperateBtns: [],\n    contextmenuBtns: [],\n    watermarkConfig: {}, // 局部水印设置\n    controlAutoHide: false,\n    hasControl: false, // 内部参数\n    loadingIcon: true,\n    loadingText: '',\n    background: '',\n    backgroundLoadingShow: false, // 加载过程中是否显示背景\n    loadingBackground: '', // 内部参数 重新播放过程中，显示播放失败前的最后一帧数据。\n    decoder: 'decoder-pro.js',\n    decoderWASM: '',\n    url: '',// 内部参数\n    rotate: 0,\n    mirrorRotate: 'none', // 镜像xx\n    playbackConfig: {\n        playList: [], // {start:xx,end:xx}\n        fps: '', // fps值\n        showControl: true,\n        showRateBtn: false,\n        rateConfig: [],// 播放倍率切换，支持[{label:'正常',value:1},{label:'2倍',value:2}]\n        isCacheBeforeDecodeForFpsRender: false, // rfs渲染时，是否在解码前缓存数据\n        uiUsePlaybackPause: false, // ui上面是否使用 playbackPause 方法\n        isPlaybackPauseClearCache: true,// playbackPause是否清除缓存数据\n        isUseFpsRender: false, // 是否使用固定的fps渲染，如果设置的fps小于流推过来的，会造成内存堆积甚至溢出\n        isUseLocalCalculateTime: false, // 是否使用本地时间来计算playback时间\n        localOneFrameTimestamp: 40, // 一帧 40ms, isUseLocalCalculateTime 为 true 生效。\n        supportWheel: false,// 是否支持滚动轴切换精度。\n    },\n    qualityConfig: [], // 支持 ['高清','超清','4K']\n    defaultStreamQuality: '',\n    scaleConfig: ['拉伸', '缩放', '正常'],\n    // text: '',\n    forceNoOffscreen: true, // 默认是不采用\n    hiddenAutoPause: false,\n    protocol: PLAYER_PLAY_PROTOCOL.fetch, // 内部参数\n    demuxType: DEMUX_TYPE.flv, // 内部参数\n    useWasm: false,//wasm 解码 （inner）默认\n    useWCS: false, //\n    useSIMD: true, // pro 默认优先使用wasm simd解码，不支持则使用wasm解码\n    wcsUseVideoRender: true, // wcs 是否使用 video 渲染\n    wasmUseVideoRender: true, // wasm 用video标签渲染\n    mseUseCanvasRender: false,//mse 用canvas标签渲染\n    hlsUseCanvasRender: false,// hls 用canvas标签渲染\n    useMSE: false, //\n    useOffscreen: false, //  内部参数\n    mseDecodeErrorReplay: true,// mse 解码失败重新播放\n    wcsDecodeErrorReplay: true,// wcs 解码失败重新播放\n    wasmDecodeErrorReplay: true, // 解码失败重新播放。\n    autoWasm: true, // 自动降级到 wasm 模式\n    webglAlignmentErrorReplay: true, // webgl对齐失败重新播放。\n    openWebglAlignment: false,//  https://github.com/langhuihui/jessibuca/issues/152\n    syncAudioAndVideo: false,// 音视频同步\n    // playback config\n    playbackDelayTime: 1000, // TF卡流播放延迟时间  Inner\n    playbackFps: 25, // Inner\n    playbackForwardMaxRateDecodeIFrame: DEFAULT_PLAYBACK_FORWARD_MAX_RATE_DECODE_IFRAME,// max rate render i frame , Inner\n    playbackCurrentTimeMove: true, // Inner\n\n    useVideoRender: true, // 使用video标签渲染\n    useCanvasRender: false, // 使用canvas渲染\n    networkDelayTimeoutReplay: false, // 网络延迟重连\n    recordType: FILE_SUFFIX.mp4,\n    checkFirstIFrame: true, // 检查第一帧是否是I帧\n    nakedFlowFps: 25, // 裸流fps\n    audioEngine: null, // 音频引擎\n    isShowRecordingUI: true, // 是否显示录制中\n    isShowZoomingUI: true, // 是否显示缩放中\n    useFaceDetector: false, // 使用人脸检测\n    useObjectDetector: false, // 使用物体检测\n    ptzClickType: PTZ_ACTIVE_EVENT_TYPE.click, // PTZ 点击类型\n    // 微信安卓音频播放块大小\n    // 计算规则 48000 * ms / 1000 = size,\n    // 48000 * 200 /1000 = 9600  播放时长200ms\n    // 48000 * 175 /1000 = 8400  播放时长175ms\n    // 48000 * 150 /1000 = 7200  播放时长150ms\n    // 48000 * 125 /1000 = 6000  播放时长125ms\n    // 48000 * 100 /1000 = 4800  播放时长100ms default\n    // 48000 * 50 /1000 = 2400  播放时长50ms\n    // 48000 * 25 /1000 = 1200  播放时长25ms\n    // 48000 * 10 /1000 = 480  播放时长10ms\n    weiXinInAndroidAudioBufferSize: 4800,\n    isCrypto: false,// 是否加密\n    cryptoKey: '',// 加密key\n    cryptoIV: '',// 加密iv\n    cryptoKeyUrl: '',// 加密key获取域名\n    autoResize: false,// 自动调整大小 inner\n    useWebFullScreen: false,// 使用web全屏(旋转播放器90度)(只会在移动端生效)\n    ptsMaxDiff: 60 * 60, //单位(秒)，默认值是1H\n    aiFaceDetectWidth: 192, // 人脸检测宽度\n    aiObjectDetectWidth: 192, // 物体检测宽度\n    videoRenderSupportScale: true, // video渲染支持Scale\n    mediaSourceTsIsMaxDiffReplay: true // 当ts间隔超过最大值之后，重新播放\n}\n\n\nexport const WORKER_CMD_TYPE = {\n    init: 'init',\n    initVideo: 'initVideo',\n    render: 'render',\n    playAudio: 'playAudio',\n    initAudio: 'initAudio',\n    kBps: 'kBps',\n    decode: 'decode',\n    audioCode: 'audioCode',\n    videoCode: 'videoCode',\n    videoCodec: 'videoCodec',\n    videoNalu: 'videoNalu',\n    wasmError: 'wasmError',\n    workerFetch: 'workerFetch',\n    iframeIntervalTs: 'iframeIntervalTs',\n    workerEnd: 'workerEnd',\n    networkDelay: 'networkDelay',\n    playbackStreamVideoFps: 'playbackStreamVideoFps',\n    wasmDecodeVideoNoResponseError: 'wasmDecodeVideoNoResponseError',\n    simdH264DecodeVideoWidthIsTooLarge: 'simdH264DecodeVideoWidthIsTooLarge',\n    websocketOpen: 'websocketOpen',\n    closeEnd: 'closeEnd',\n}\n\nexport const WASM_ERROR = {\n    invalidNalUnitSize: 'Invalid NAL unit size',\n    // errorSplittingTheInputIntoNALUnits: 'Error splitting the input into NAL units'\n}\n\nexport const MEDIA_TYPE = {\n    audio: 1,\n    video: 2\n}\n\nexport const FLV_MEDIA_TYPE = {\n    audio: 8,\n    video: 9,\n    scriptData: 18\n}\n\nexport const WORKER_SEND_TYPE = {\n    init: 'init',\n    decode: 'decode',\n    audioDecode: 'audioDecode',\n    videoDecode: 'videoDecode',\n    initAudioCodec: 'initAudioCodec',\n    initVideoCodec: 'initVideoCodec',\n    close: 'close',\n    updateConfig: 'updateConfig',\n    resetDecode: 'resetDecode',\n    clearBuffer: 'clearBuffer',\n    resetAudioDecode: 'resetAudioDecode',\n    resetVideoDecode: 'resetVideoDecode',\n    fetchStream: 'fetchStream',\n    sendWsMessage: 'sendWsMessage',\n}\n\n\n// inner events\nexport const EVENTS = {\n    fullscreen: 'fullscreen$2',\n    webFullscreen: 'webFullscreen',\n    decoderWorkerInit: 'decoderWorkerInit',\n    play: 'play',\n    playing: 'playing',\n    pause: 'pause',\n    mute: 'mute',\n    load: 'load',\n    loading: 'loading',\n    zooming: 'zooming',\n    videoInfo: 'videoInfo',\n    timeUpdate: 'timeUpdate',\n    audioInfo: \"audioInfo\",\n    log: 'log',\n    error: \"error\",\n    kBps: 'kBps',\n    timeout: 'timeout',\n    delayTimeout: 'delayTimeout',\n    delayTimeoutRetryEnd: 'delayTimeoutRetryEnd',\n    loadingTimeout: 'loadingTimeout',\n    loadingTimeoutRetryEnd: 'loadingTimeoutRetryEnd',\n    stats: 'stats',\n    performance: \"performance\",\n    faceDetectActive: 'faceDetectActive',\n    objectDetectActive: 'objectDetectActive',\n    // record\n    record: 'record',\n    recording: 'recording',\n    recordingTimestamp: 'recordingTimestamp',\n    recordStart: 'recordStart',\n    recordEnd: 'recordEnd',\n    recordCreateError: 'recordCreateError',\n    recordBlob: 'recordBlob',\n\n    buffer: 'buffer',\n    videoFrame: 'videoFrame',\n    start: 'start',\n    metadata: 'metadata',\n    resize: 'resize',\n    volumechange: 'volumechange',\n    destroy: 'destroy',\n    beforeDestroy: 'beforeDestroy',\n\n    // stream\n    streamEnd: 'streamEnd',\n    streamRate: 'streamRate',\n    streamAbps: 'streamAbps',\n    streamVbps: 'streamVbps',\n    streamDts: 'streamDts',\n    streamSuccess: 'streamSuccess',\n    streamMessage: 'streamMessage',\n    streamError: 'streamError',\n    streamStats: 'streamStats',\n\n    // MSE\n    mseSourceOpen: 'mseSourceOpen',\n    mseSourceClose: 'mseSourceClose',\n    mseSourceended: 'mseSourceended',\n    mseSourceBufferError: 'mseSourceBufferError',\n    mseSourceBufferBusy: 'mseSourceBufferBusy',\n    mseSourceBufferFull: 'mseSourceBufferFull',\n    // VIDEO\n    videoWaiting: 'videoWaiting',\n    videoTimeUpdate: 'videoTimeUpdate',\n    videoSyncAudio: 'videoSyncAudio',\n    //\n    playToRenderTimes: 'playToRenderTimes',\n    playbackTime: 'playbackTime',\n    playbackTimestamp: 'playbackTimestamp',\n    playbackPrecision: 'playbackPrecision',\n    playbackJustTime: 'playbackJustTime',\n    playbackStats: 'playbackStats',\n    playbackSeek: 'playbackSeek',\n    playbackPause: 'playbackPause',\n    playbackPauseOrResume: 'playbackPauseOrResume',\n    playbackRateChange: 'playbackRateChange',\n    playbackPreRateChange: 'playbackPreRateChange',\n\n    ptz: 'ptz',\n    streamQualityChange: 'streamQualityChange',\n    visibilityChange: \"visibilityChange\",\n    netBuf: 'netBuf',\n    close: 'close',\n    networkDelayTimeout: 'networkDelayTimeout',\n    togglePerformancePanel: 'togglePerformancePanel',\n    viewResizeChange: 'viewResizeChange',\n    flvDemuxBufferSizeTooLarge: 'flvDemuxBufferSizeTooLarge',\n    // talk\n    talkGetUserMediaSuccess: 'talkGetUserMediaSuccess',\n    talkGetUserMediaFail: 'talkGetUserMediaFail',\n    talkGetUserMediaTimeout: 'talkGetUserMediaTimeout',\n    talkStreamStart: 'talkStreamStart',\n    talkStreamOpen: 'talkStreamOpen',\n    talkStreamClose: 'talkStreamClose',\n    talkStreamError: 'talkStreamError',\n    talkStreamInactive: 'talkStreamInactive',\n\n    webrtcDisconnect: 'webrtcDisconnect',\n    webrtcFailed: 'webrtcFailed',\n    webrtcClosed: 'webrtcClosed',\n\n    // crash\n    crashLog: 'crashLog',\n\n    // dom\n    focus: 'focus',\n    blur: 'blur',\n    visibilityHiddenTimeout: 'visibilityHiddenTimeout',\n\n    // websocket\n    websocketOpen: 'websocketOpen',\n    websocketClose: 'websocketClose',\n    websocketError: 'websocketError',\n    websocketMessage: 'websocketMessage',\n\n    // ai\n\n    aiObjectDetectorInfo: 'aiObjectDetectorInfo',\n    aiFaceDetector: 'aiFaceDetector',\n\n    //\n    playFailedAndPaused: 'playFailedAndPaused',\n}\n\n// jessibuca events\nexport const JESSIBUCA_EVENTS = {\n    load: EVENTS.load,\n    timeUpdate: EVENTS.timeUpdate,\n    videoInfo: EVENTS.videoInfo,\n    audioInfo: EVENTS.audioInfo,\n    error: EVENTS.error,\n    kBps: EVENTS.kBps,\n    start: EVENTS.start,\n    timeout: EVENTS.timeout,\n    loadingTimeout: EVENTS.loadingTimeout,\n    loadingTimeoutRetryEnd: EVENTS.loadingTimeoutRetryEnd,\n    delayTimeout: EVENTS.delayTimeout,\n    delayTimeoutRetryEnd: EVENTS.delayTimeoutRetryEnd,\n    fullscreen: 'fullscreen',\n    webFullscreen: EVENTS.webFullscreen,\n    play: EVENTS.play,\n    pause: EVENTS.pause,\n    mute: EVENTS.mute,\n    stats: EVENTS.stats,\n    performance: EVENTS.performance,\n    recordingTimestamp: EVENTS.recordingTimestamp,\n    recordStart: EVENTS.recordStart,\n    recordEnd: EVENTS.recordEnd,\n    recordBlob: EVENTS.recordBlob,\n    playToRenderTimes: EVENTS.playToRenderTimes,\n\n    // playback\n    playbackSeek: EVENTS.playbackSeek,\n    playbackStats: EVENTS.playbackStats,\n    playbackTimestamp: EVENTS.playbackTimestamp,\n    playbackPauseOrResume: EVENTS.playbackPauseOrResume,\n    playbackPreRateChange: EVENTS.playbackPreRateChange,\n    playbackRateChange: EVENTS.playbackRateChange,\n\n    ptz: EVENTS.ptz,\n    streamQualityChange: EVENTS.streamQualityChange,\n    zooming: EVENTS.zooming,\n    crashLog: EVENTS.crashLog,\n\n    focus: EVENTS.focus,\n    blur: EVENTS.blur,\n    visibilityHiddenTimeout: EVENTS.visibilityHiddenTimeout,\n    visibilityChange: EVENTS.visibilityChange,\n\n    // websocket\n    websocketOpen: EVENTS.websocketOpen,\n    //\n    networkDelayTimeout: EVENTS.networkDelayTimeout,\n    aiObjectDetectorInfo: EVENTS.aiObjectDetectorInfo,\n    playFailedAndPaused: EVENTS.playFailedAndPaused,\n}\n\nexport const TALK_EVENTS = {\n    talkStreamClose: EVENTS.talkStreamClose,\n    talkStreamError: EVENTS.talkStreamError,\n    talkStreamInactive: EVENTS.talkStreamInactive,\n    talkGetUserMediaTimeout: EVENTS.talkGetUserMediaTimeout,\n}\n\nexport const EVENTS_ERROR = {\n    playError: 'playIsNotPauseOrUrlIsNull',\n    fetchError: \"fetchError\",\n    websocketError: 'websocketError',\n    webcodecsH265NotSupport: 'webcodecsH265NotSupport',\n    webcodecsDecodeError: 'webcodecsDecodeError',\n    mediaSourceH265NotSupport: 'mediaSourceH265NotSupport',\n    mediaSourceDecoderConfigurationError: 'mediaSourceDecoderConfigurationError',\n    mediaSourceFull: EVENTS.mseSourceBufferFull,\n    mseSourceBufferError: EVENTS.mseSourceBufferError,\n    mediaSourceAppendBufferError: 'mediaSourceAppendBufferError',\n    mediaSourceBufferListLarge: 'mediaSourceBufferListLarge',\n    mediaSourceAppendBufferEndTimeout: 'mediaSourceAppendBufferEndTimeout',\n    mediaSourceTsIsMaxDiff: 'mediaSourceTsIsMaxDiff',\n    wasmDecodeError: 'wasmDecodeError',\n    hlsError: 'hlsError',\n    webrtcError: 'webrtcError',\n    webglAlignmentError: 'webglAlignmentError',\n    webcodecsWidthOrHeightChange: 'webcodecsWidthOrHeightChange',\n    tallWebsocketClosedByError: 'tallWebsocketClosedByError',\n    flvDemuxBufferSizeTooLarge: EVENTS.flvDemuxBufferSizeTooLarge,\n    wasmDecodeVideoNoResponseError: 'wasmDecodeVideoNoResponseError',\n    audioChannelError: 'audioChannelError',\n    simdH264DecodeVideoWidthIsTooLarge: 'simdH264DecodeVideoWidthIsTooLarge',\n}\n\n\nexport const WEBSOCKET_STATUS = {\n    notConnect: 'notConnect',\n    open: 'open',\n    close: 'close',\n    error: 'error'\n}\n\nexport const WEBSOCKET_STATUS_CODE = {\n    connecting: 0,\n    open: 1,\n    closing: 2,\n    closed: 3\n}\n\n\nexport const BUFFER_STATUS = {\n    empty: 'empty',\n    buffering: 'buffering',\n    full: 'full'\n}\n\n\nexport const SCREENSHOT_TYPE = {\n    download: 'download',\n    base64: 'base64',\n    blob: 'blob'\n}\n\n\nexport const RECORDING_TYPE = {\n    download: 'download',\n    blob: 'blob'\n}\n\n\nexport const VIDEO_ENC_TYPE = {\n    7: 'H264(AVC)', //\n    12: 'H265(HEVC)' //\n}\n\nexport const VIDEO_ENC_CODE = {\n    h264: 7,\n    h265: 12\n}\n\nexport const VIDEO_ENC_TYPE_SHOW = {\n    h264: 'H264(AVC)',\n    h265: 'H265(HEVC)'\n}\n\nexport const AUDIO_ENC_CODE = {\n    AAC: 10,\n    ALAW: 7,\n    MULAW: 8,\n    MP3: 2\n}\n\nexport const AUDIO_ENC_CODE_SHOW = {\n    AAC: 'AAC',\n    ALAW: 'ALAW(g711a)',\n    MULAW: 'MULAW(g711u)'\n}\n\nexport const AUDIO_ENC_TYPE = {\n    10: 'AAC',\n    7: 'ALAW',\n    8: 'MULAW'\n}\n\n\nexport const H264_NAL_TYPE = {\n    sps: 7,\n    pps: 8,\n    iFrame: 5,\n    kUnspecified: 0,\n    kSliceNonIDR: 1,\n    kSliceDPA: 2,\n    kSliceDPB: 3,\n    kSliceDPC: 4,\n    kSliceIDR: 5,\n    kSliceSEI: 6,\n    kSliceSPS: 7,\n    kSlicePPS: 8,\n    kSliceAUD: 9,\n    kEndOfSequence: 10,\n    kEndOfStream: 11,\n    kFiller: 12,\n    kSPSExt: 13,\n    kReserved0: 14,\n}\n\nexport const H265_NAL_TYPE = {\n    vps: 32, // 语义为视频参数集\n    sps: 33, // 语义为序列参数集\n    pps: 34, // 语义为图像参数集\n    sei: 39, //SEI 语义为补充增强信息\n    //iFrame: 19, // 语义为可能有RADL图像的IDR图像的SS编码数据 IDR\n    //pFrame: 1, //  语义为被参考的后置图像，且非TSA、非STSA的SS编码数据\n    //nLp: 20, // kSliceIDR_N_LP\n}\n\n\nexport const CONTROL_HEIGHT = 38\nexport const CONTROL_PLAYBACK_HEIGHT = 48\n\nexport const SCALE_MODE_TYPE = {\n    full: 0, //  视频画面完全填充canvas区域,画面会被拉伸\n    auto: 1, // 视频画面做等比缩放后,高或宽对齐canvas区域,画面不被拉伸,但有黑边\n    fullAuto: 2 // 视频画面做等比缩放后,完全填充canvas区域,画面不被拉伸,没有黑边,但画面显示不全\n}\n\n\nexport const CANVAS_RENDER_TYPE = {\n    webcodecs: 'webcodecs',\n    webgl: 'webgl',\n    offscreen: 'offscreen',\n    mse: 'mse',\n    hls: 'hls'\n}\n\nexport const ENCODED_VIDEO_TYPE = {\n    key: 'key',\n    delta: 'delta'\n}\n\n\nexport const MP4_CODECS = {\n    avc: 'video/mp4; codecs=\"avc1.64002A\"',\n    hev: 'video/mp4; codecs=\"hev1.1.6.L123.b0\"',\n}\n\n\nexport const MEDIA_SOURCE_STATE = {\n    ended: 'ended',\n    open: 'open',\n    closed: 'closed'\n}\n\n\n// frag duration\nexport const FRAG_DURATION = Math.ceil(1000 / 25)\n\n\nexport const AUDIO_SYNC_VIDEO_DIFF = 1000; // ms\n\n// renderTimeDay once length\nexport const PLAYBACK_RENDER_ONCE_LENGTH = 2000;\n\nexport const HOT_KEY = {\n    esc: 27, //\n    arrowUp: 38, //\n    arrowDown: 40, //\n}\n\n// playback control time precision\nexport const PLAYBACK_CONTROL_TIME_PRECISION = {\n    oneHour: 'oneHour', // 60min\n    halfHour: 'halfHour', // 30min\n    tenMin: 'tenMin', // 10min\n    fiveMin: 'fiveMin', // 5min\n    // oneMin: \"oneMin\" // 1min\n}\n\nexport const PLAYBACK_CONTROL_TIME_PRECISION_CLASS = {\n    oneHour: 'one-hour', // 60min\n    halfHour: 'half-hour', // 30min\n    tenMin: 'ten-min', // 10min\n    fiveMin: 'five-min', // 5min\n    // oneMin: 'one-min' // 1min\n}\n\nexport const PLAYBACK_CONTROL_TIME_PRECISION_TEXT = {\n    oneHour: '1h', // 60min\n    halfHour: '30min', // 30min\n    tenMin: '10min', // 10min\n    fiveMin: '5min', // 5min\n    // oneMin: '1min' // 1min\n}\n\n//\nexport const PLAYBACK_CONTROL_TIME_PRECISION_ARRAY = [\n    'oneHour', 'halfHour', 'tenMin', 'fiveMin'\n]\n\nexport const PTZ_ARROW = ['up', 'right', 'down', 'left'];\n\nexport const PTZ_OBJ = {\n    up: \"up\",\n    right: 'right',\n    down: 'down',\n    left: 'left',\n    stop: 'stop'\n}\n\nexport const TALK_ENC_TYPE = {\n    g711a: 'g711a',\n    g711u: 'g711u'\n}\n\nexport const SCREENSHOT_FORMAT_TYPE = {\n    png: 'image/png',\n    jpeg: 'image/jpeg',\n    webp: 'image/webp'\n};\n\nexport const PLAYBACK_VIDEO_MAX_BUFFER_SIZE = 50;\n\n\nexport const MEDIA_SOURCE_EVENTS = {\n    sourceClose: 'sourceclose',\n    sourceOpen: 'sourceopen',\n    sourceended: 'sourceended'\n}\n\nexport const VIDEO_ELEMENT_EVENTS = {\n    canplay: 'canplay',\n    waiting: \"waiting\",\n    timeUpdate: 'timeupdate',\n    ratechange: 'ratechange'\n}\n\n\nexport const VIDEO_ENCODE_TYPE = {\n    h264: 'avc',\n    h265: 'hevc'\n}\n\n\nexport const AVCPacketType = {\n    AVCSequenceHeader: 0,\n    AVCNalu: 1,\n}\n\n\nexport const WCS_ERROR = {\n    keyframeIsRequiredError: 'A key frame is required after configure() or flush()',\n    canNotDecodeClosedCodec: \"Cannot call 'decode' on a closed codec\",\n}\nexport const FETCH_ERROR = {\n    abortError: 'The user aborted a request',\n    abortError2: 'AbortError',\n    abort: 'AbortError'\n}\n\nexport const PLAYER_STATUS = {\n    loading: 'loading',\n    playing: 'playing',\n    paused: 'paused',\n    destroy: 'destroy'\n}\n\n\nexport const AVC_PACKET_TYPE = {\n    sequenceHeader: 0,\n    nalu: 1\n}\n\nexport const FRAME_TYPE = {\n    keyFrame: 1,\n    interFrame: 2\n}\n\n//     RTP_PAYLOAD_TYPE_PCMU    = 0,   // g711u\n//     RTP_PAYLOAD_TYPE_PCMA    = 8,   // g711a\n//     RTP_PAYLOAD_TYPE_JPEG    = 26,\n//     RTP_PAYLOAD_TYPE_H264    = 96,\n//     RTP_PAYLOAD_TYPE_H265    = 97,\n//     RTP_PAYLOAD_TYPE_OPUS    = 98,\n//     RTP_PAYLOAD_TYPE_AAC     = 99,\n//     RTP_PAYLOAD_TYPE_G726    = 100,\n//     RTP_PAYLOAD_TYPE_G726_16 = 101,\n//     RTP_PAYLOAD_TYPE_G726_24 = 102,\n//     RTP_PAYLOAD_TYPE_G726_32 = 103,\n//     RTP_PAYLOAD_TYPE_G726_40 = 104,\n//     RTP_PAYLOAD_TYPE_SPEEX   = 105,\nexport const RTP_PAYLOAD_TYPE = {\n    pcma: 8,\n    g711a: 8,\n    pcmu: 0,\n    g711u: 0,\n    jpeg: 26,\n    h264: 96,\n    h265: 97,\n    opus: 98,\n}\n\n\nexport const TALK_PACKET_TYPE = {\n    empty: 'empty', // 裸的协议\n    rtp: 'rtp',\n    opus: 'opus'\n}\n\n\nexport const RECORD_STREAM_TYPE = {\n    stream: 'stream',\n    playback: 'playback'\n}\n\n\nexport const WEBSOCKET_EVENTS = {\n    open: 'open',\n    close: 'close',\n    error: 'error',\n    message: 'message'\n}\n\nexport const TALK_ENGINE = {\n    worklet: 'worklet',\n    script: 'script'\n}\n\n// default talk options\nexport const DEFAULT_TALK_OPTIONS = {\n    encType: TALK_ENC_TYPE.g711a,\n    packetType: TALK_PACKET_TYPE.rtp, // 默认的包个格式化\n    rtpSsrc: '0000000000', // 10 位\n    numberChannels: 1, // 采样通道\n    sampleRate: 8000, // 采样率\n    sampleBitsWidth: 16, // 采样精度\n    debug: false,\n    debugLevel: DEBUG_LEVEL.warn, // debug level\n    testMicrophone: false, // 测试麦克风获取\n    audioBufferLength: 160, // 默认走的是 20ms 8000 采样率 16 位精度\n    engine: TALK_ENGINE.worklet, //\n    checkGetUserMediaTimeout: false, // 检测 getUserMedia 超时\n    getUserMediaTimeout: 10 * 1000, // getUserMedia 超时时间 10s\n}\n\n\nexport const AUDIO_ENGINE_TYPE = {\n    worklet: 'worklet',\n    script: 'script', // default\n    active: 'active' //\n}\n\n\nexport const CONTROL_BUTTON_OPTIONS = {\n    name: '',\n    index: 0,\n    icon: '',\n    iconHover: '',\n    iconTitle: '',\n    activeIcon: '',\n    activeIconHover: '',\n    activeIconTitle: '',\n    click: null,\n    activeClick: null,\n}\n\nexport const MENU_ITEM_OPTIONS = {\n    content: '',\n    click: null,\n    index: 0\n}\n\n\n// multi options\nexport const DEFAULT_MULTI_OPTIONS = {\n    container: '',\n    maxSplit: 4, // 最大分屏数\n    split: 1, // 默认分屏数\n    style: {\n        border: \"#343434\",\n        borderSelect: \"#FFCC00\",\n        background: \"#000\"\n    }\n}\n\n//\nexport const MULTI_EVENTS = {\n    dblSelected: 'multiDblSelected', // 双击选中窗口\n    selected: 'multiSelected', // 选中窗口\n    mouseOver: 'multiMouseover', // 鼠标移入\n    mouseOut: 'multiMouseout', // 鼠标移出\n    mouseUp: 'multiMouseup', // 鼠标mouseUp事件\n}\n","/*!\n* screenfull\n* v5.1.0 - 2020-12-24\n* (c) Sindre Sorhus; MIT License\n*/\n(function () {\n\t'use strict';\n\n\tvar document = typeof window !== 'undefined' && typeof window.document !== 'undefined' ? window.document : {};\n\tvar isCommonjs = typeof module !== 'undefined' && module.exports;\n\n\tvar fn = (function () {\n\t\tvar val;\n\n\t\tvar fnMap = [\n\t\t\t[\n\t\t\t\t'requestFullscreen',\n\t\t\t\t'exitFullscreen',\n\t\t\t\t'fullscreenElement',\n\t\t\t\t'fullscreenEnabled',\n\t\t\t\t'fullscreenchange',\n\t\t\t\t'fullscreenerror'\n\t\t\t],\n\t\t\t// New WebKit\n\t\t\t[\n\t\t\t\t'webkitRequestFullscreen',\n\t\t\t\t'webkitExitFullscreen',\n\t\t\t\t'webkitFullscreenElement',\n\t\t\t\t'webkitFullscreenEnabled',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t// Old WebKit\n\t\t\t[\n\t\t\t\t'webkitRequestFullScreen',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitCurrentFullScreenElement',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t[\n\t\t\t\t'mozRequestFullScreen',\n\t\t\t\t'mozCancelFullScreen',\n\t\t\t\t'mozFullScreenElement',\n\t\t\t\t'mozFullScreenEnabled',\n\t\t\t\t'mozfullscreenchange',\n\t\t\t\t'mozfullscreenerror'\n\t\t\t],\n\t\t\t[\n\t\t\t\t'msRequestFullscreen',\n\t\t\t\t'msExitFullscreen',\n\t\t\t\t'msFullscreenElement',\n\t\t\t\t'msFullscreenEnabled',\n\t\t\t\t'MSFullscreenChange',\n\t\t\t\t'MSFullscreenError'\n\t\t\t]\n\t\t];\n\n\t\tvar i = 0;\n\t\tvar l = fnMap.length;\n\t\tvar ret = {};\n\n\t\tfor (; i < l; i++) {\n\t\t\tval = fnMap[i];\n\t\t\tif (val && val[1] in document) {\n\t\t\t\tfor (i = 0; i < val.length; i++) {\n\t\t\t\t\tret[fnMap[0][i]] = val[i];\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t})();\n\n\tvar eventNameMap = {\n\t\tchange: fn.fullscreenchange,\n\t\terror: fn.fullscreenerror\n\t};\n\n\tvar screenfull = {\n\t\trequest: function (element, options) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tvar onFullScreenEntered = function () {\n\t\t\t\t\tthis.off('change', onFullScreenEntered);\n\t\t\t\t\tresolve();\n\t\t\t\t}.bind(this);\n\n\t\t\t\tthis.on('change', onFullScreenEntered);\n\n\t\t\t\telement = element || document.documentElement;\n\n\t\t\t\tvar returnPromise = element[fn.requestFullscreen](options);\n\n\t\t\t\tif (returnPromise instanceof Promise) {\n\t\t\t\t\treturnPromise.then(onFullScreenEntered).catch(reject);\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t},\n\t\texit: function () {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tif (!this.isFullscreen) {\n\t\t\t\t\tresolve();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar onFullScreenExit = function () {\n\t\t\t\t\tthis.off('change', onFullScreenExit);\n\t\t\t\t\tresolve();\n\t\t\t\t}.bind(this);\n\n\t\t\t\tthis.on('change', onFullScreenExit);\n\n\t\t\t\tvar returnPromise = document[fn.exitFullscreen]();\n\n\t\t\t\tif (returnPromise instanceof Promise) {\n\t\t\t\t\treturnPromise.then(onFullScreenExit).catch(reject);\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t},\n\t\ttoggle: function (element, options) {\n\t\t\treturn this.isFullscreen ? this.exit() : this.request(element, options);\n\t\t},\n\t\tonchange: function (callback) {\n\t\t\tthis.on('change', callback);\n\t\t},\n\t\tonerror: function (callback) {\n\t\t\tthis.on('error', callback);\n\t\t},\n\t\ton: function (event, callback) {\n\t\t\tvar eventName = eventNameMap[event];\n\t\t\tif (eventName) {\n\t\t\t\tdocument.addEventListener(eventName, callback, false);\n\t\t\t}\n\t\t},\n\t\toff: function (event, callback) {\n\t\t\tvar eventName = eventNameMap[event];\n\t\t\tif (eventName) {\n\t\t\t\tdocument.removeEventListener(eventName, callback, false);\n\t\t\t}\n\t\t},\n\t\traw: fn\n\t};\n\n\tif (!fn) {\n\t\tif (isCommonjs) {\n\t\t\tmodule.exports = {isEnabled: false};\n\t\t} else {\n\t\t\twindow.screenfull = {isEnabled: false};\n\t\t}\n\n\t\treturn;\n\t}\n\n\tObject.defineProperties(screenfull, {\n\t\tisFullscreen: {\n\t\t\tget: function () {\n\t\t\t\treturn Boolean(document[fn.fullscreenElement]);\n\t\t\t}\n\t\t},\n\t\telement: {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\treturn document[fn.fullscreenElement];\n\t\t\t}\n\t\t},\n\t\tisEnabled: {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\t// Coerce to boolean in case of old WebKit\n\t\t\t\treturn Boolean(document[fn.fullscreenEnabled]);\n\t\t\t}\n\t\t}\n\t});\n\n\tif (isCommonjs) {\n\t\tmodule.exports = screenfull;\n\t} else {\n\t\twindow.screenfull = screenfull;\n\t}\n})();\n","import {\n    MP4_CODECS,\n    FILE_SUFFIX,\n    H264_NAL_TYPE,\n    VIDEO_ENC_TYPE_SHOW,\n    H265_NAL_TYPE,\n    AUDIO_ENC_TYPE,\n    AUDIO_ENC_CODE_SHOW,\n    AUDIO_ENC_CODE,\n    DEFAULT_JESSIBUCA_OPTIONS,\n    DEFAULT_PLAYER_OPTIONS,\n    DEFAULT_TALK_OPTIONS,\n    CONTROL_BUTTON_OPTIONS, MENU_ITEM_OPTIONS, DEFAULT_MULTI_OPTIONS\n} from \"../constant\";\nimport screenfull from \"screenfull\";\nimport {isAacCodecPacket} from \"./aac\";\n\nexport function noop() {\n}\n\n\nexport function supportOffscreen($canvas) {\n    return typeof $canvas.transferControlToOffscreen === 'function';\n}\n\n\nexport function supportOffscreenV2() {\n    return typeof OffscreenCanvas !== \"undefined\";\n}\n\n\nexport function createContextGL($canvas) {\n    let gl = null;\n\n    const validContextNames = [\"webgl\", \"experimental-webgl\", \"moz-webgl\", \"webkit-3d\"];\n    let nameIndex = 0;\n\n    while (!gl && nameIndex < validContextNames.length) {\n        const contextName = validContextNames[nameIndex];\n\n        try {\n            let contextOptions = {preserveDrawingBuffer: true};\n            gl = $canvas.getContext(contextName, contextOptions);\n        } catch (e) {\n            console.error(e);\n            gl = null;\n        }\n\n        if (!gl || typeof gl.getParameter !== \"function\") {\n            gl = null;\n        }\n\n        ++nameIndex;\n    }\n\n\n    return gl;\n}\n\n\nexport function audioContextUnlock(context) {\n    context.resume();\n    const source = context.createBufferSource();\n    source.buffer = context.createBuffer(1, 1, 22050);\n    source.connect(context.destination);\n    if (source.noteOn) {\n        source.noteOn(0);\n    } else {\n        source.start(0);\n    }\n}\n\nexport function dataURLToFile(dataURL = '') {\n    const arr = dataURL.split(\",\");\n    const bstr = atob(arr[1]);\n    const type = arr[0].replace(\"data:\", \"\").replace(\";base64\", \"\")\n    let n = bstr.length, u8arr = new Uint8Array(n);\n    while (n--) {\n        u8arr[n] = bstr.charCodeAt(n);\n    }\n    return new File([u8arr], 'file', {type});\n}\n\nexport function downloadFile(file, fileName) {\n    if (file instanceof Blob || file instanceof File) {\n        file = new Blob([file]);\n    }\n    const aLink = document.createElement(\"a\");\n    aLink.download = fileName;\n    aLink.href = file;\n    aLink.click();\n}\n\n\nexport function downloadImg(content, fileName) {\n    const aLink = document.createElement(\"a\");\n    aLink.download = fileName;\n    const href = URL.createObjectURL(content);\n    aLink.href = href;\n    aLink.click();\n    setTimeout(() => {\n        URL.revokeObjectURL(href);\n    }, isIOS() ? 1000 : 0)\n}\n\nexport function checkFull() {\n    let isFull = document.fullscreenElement || window.webkitFullscreenElement || document.msFullscreenElement;\n    if (isFull === undefined) isFull = false;\n    return !!isFull;\n}\n\nexport function now() {\n    return new Date().getTime();\n}\n\nexport const supportedWasm = (() => {\n    try {\n        if (typeof WebAssembly === \"object\"\n            && typeof WebAssembly.instantiate === \"function\") {\n            const module = new WebAssembly.Module(Uint8Array.of(0x0, 0x61, 0x73, 0x6d, 0x01, 0x00, 0x00, 0x00));\n            if (module instanceof WebAssembly.Module)\n                return new WebAssembly.Instance(module) instanceof WebAssembly.Instance;\n        }\n    } catch (e) {\n    }\n    return false;\n})();\n\nexport function clamp(num, a, b) {\n    return Math.max(Math.min(num, Math.max(a, b)), Math.min(a, b));\n}\n\nexport function setStyle(element, key, value) {\n    if (!element) {\n        return\n    }\n    if (typeof key === 'object') {\n        Object.keys(key).forEach(item => {\n            setStyle(element, item, key[item]);\n        });\n    }\n    element.style[key] = value;\n    return element;\n}\n\n\nexport function getStyle(element, key, numberType = true) {\n    if (!element) {\n        return 0\n    }\n\n    const value = getComputedStyle(element, null).getPropertyValue(key);\n    return numberType ? parseFloat(value) : value;\n}\n\nexport function getNowTime() {\n    if (performance && typeof performance.now === 'function') {\n        return performance.now();\n    }\n    return Date.now();\n}\n\nexport function calculationRate(callback) {\n    let totalSize = 0;\n    let lastTime = getNowTime();\n    return size => {\n        if (!isNumber(size)) {\n            return;\n        }\n        totalSize += size;\n        const thisTime = getNowTime();\n        const diffTime = thisTime - lastTime;\n        if (diffTime >= 1000) {\n            callback((totalSize / diffTime) * 1000);\n            lastTime = thisTime;\n            totalSize = 0;\n        }\n    };\n}\n\nexport function downloadRecord(blob, name, suffix) {\n    const url = window.URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = (name || now()) + '.' + (suffix || FILE_SUFFIX.webm);\n    a.click();\n    setTimeout(() => {\n        window.URL.revokeObjectURL(url);\n    }, isIOS() ? 1000 : 0)\n}\n\nexport const env = '__ENV__';\nexport const version = '__VERSION__'\nexport const proVersionTime = '__BUILD_DAY__'\nexport const isDev = env === '\"development\"';\nexport const isProd = env === '\"production\"';\nexport const isRelease = env === '\"release\"';\n\nexport function isMobile() {\n    return (/iphone|ipod|android.*mobile|windows.*phone|blackberry.*mobile/i.test(window.navigator.userAgent.toLowerCase()));\n}\n\nexport function isPad() {\n    return (/ipad|android(?!.*mobile)|tablet|kindle|silk/i.test(window.navigator.userAgent.toLowerCase()));\n}\n\nexport function isAndroid() {\n    const UA = window.navigator.userAgent.toLowerCase();\n    return (/android/i.test(UA));\n}\n\nexport function getBrowser() {\n    const UserAgent = window.navigator.userAgent.toLowerCase() || '';\n    const browserInfo = {\n        type: '',\n        version: ''\n    };\n    const browserArray = {\n        IE: window.ActiveXObject || \"ActiveXObject\" in window, // IE\n        Chrome: UserAgent.indexOf('chrome') > -1 && UserAgent.indexOf('safari') > -1, // Chrome浏览器\n        Firefox: UserAgent.indexOf('firefox') > -1, // 火狐浏览器\n        Opera: UserAgent.indexOf('opera') > -1, // Opera浏览器\n        Safari: UserAgent.indexOf('safari') > -1 && UserAgent.indexOf('chrome') == -1, // safari浏览器\n        Edge: UserAgent.indexOf('edge') > -1, // Edge浏览器\n        QQBrowser: /qqbrowser/.test(UserAgent), // qq浏览器\n        WeixinBrowser: /MicroMessenger/i.test(UserAgent) // 微信浏览器\n    };\n    // console.log(browserArray)\n    for (let i in browserArray) {\n        if (browserArray[i]) {\n            let versions = '';\n            if (i === 'IE') {\n                const versionArray = UserAgent.match(/(msie\\s|trident.*rv:)([\\w.]+)/)\n                if (versionArray && versionArray.length > 2) {\n                    versions = UserAgent.match(/(msie\\s|trident.*rv:)([\\w.]+)/)[2];\n                }\n            } else if (i === 'Chrome') {\n                for (let mt in navigator.mimeTypes) {\n                    //检测是否是360浏览器(测试只有pc端的360才起作用)\n                    if (navigator.mimeTypes[mt]['type'] === 'application/360softmgrplugin') {\n                        i = '360';\n                    }\n                }\n                const versionArray = UserAgent.match(/chrome\\/([\\d.]+)/);\n                if (versionArray && versionArray.length > 1) {\n                    versions = versionArray[1];\n                }\n            } else if (i === 'Firefox') {\n                const versionArray = UserAgent.match(/firefox\\/([\\d.]+)/);\n                if (versionArray && versionArray.length > 1) {\n                    versions = versionArray[1];\n                }\n            } else if (i === 'Opera') {\n                const versionArray = UserAgent.match(/opera\\/([\\d.]+)/);\n                if (versionArray && versionArray.length > 1) {\n                    versions = versionArray[1];\n                }\n            } else if (i === 'Safari') {\n                const versionArray = UserAgent.match(/version\\/([\\d.]+)/);\n                if (versionArray && versionArray.length > 1) {\n                    versions = versionArray[1];\n                }\n            } else if (i === 'Edge') {\n                const versionArray = UserAgent.match(/edge\\/([\\d.]+)/);\n                if (versionArray && versionArray.length > 1) {\n                    versions = versionArray[1];\n                }\n            } else if (i === 'QQBrowser') {\n                const versionArray = UserAgent.match(/qqbrowser\\/([\\d.]+)/);\n                if (versionArray && versionArray.length > 1) {\n                    versions = versionArray[1];\n                }\n            }\n            browserInfo.type = i;\n            browserInfo.version = parseInt(versions);\n        }\n    }\n    return browserInfo;\n}\n\nexport function isIOS() {\n    const UA = window.navigator.userAgent.toLowerCase();\n    return UA && /iphone|ipad|ipod|ios/.test(UA);\n}\n\nexport function isSafari() {\n    const ua = window.navigator.userAgent;\n    return !ua.match(/Chrome/gi) && !!ua.match(/Safari/gi);\n}\n\nexport function parseTime(time, cFormat) {\n    if (arguments.length === 0) {\n        return null\n    }\n    var format = cFormat || '{y}-{m}-{d} {h}:{i}:{s}'\n    var date;\n    if (typeof time === 'object') {\n        date = time\n    } else {\n        if (('' + time).length === 10) time = parseInt(time) * 1000;\n        time = +time; // 转成int 型\n        date = new Date(time)\n    }\n    var formatObj = {\n        y: date.getFullYear(),\n        m: date.getMonth() + 1,\n        d: date.getDate(),\n        h: date.getHours(),\n        i: date.getMinutes(),\n        s: date.getSeconds(),\n        a: date.getDay()\n    };\n    var time_str = format.replace(/{(y|m|d|h|i|s|a)+}/g, (result, key) => {\n        var value = formatObj[key]\n        if (key === 'a') return ['一', '二', '三', '四', '五', '六', '日'][value - 1]\n        if (result.length > 0 && value < 10) {\n            value = '0' + value\n        }\n        return value || 0\n    });\n    return time_str\n}\n\n// 是否支持 webcodecs\nexport function supportWCS() {\n    return \"VideoEncoder\" in window;\n}\n\nexport function wcsIsConfigSupported(config) {\n    return new Promise((resolve, reject) => {\n        if (!supportWCS()) {\n            return reject('VideoEncoder is not supported')\n        }\n\n        if (!VideoEncoder.isConfigSupported) {\n            return reject('VideoEncoder.isConfigSupported is not a function')\n        }\n\n        VideoEncoder.isConfigSupported(config).then((result) => {\n            if (result.supported) {\n                resolve()\n            } else {\n                reject('VideoEncoder.isConfigSupported() result is not supported');\n            }\n        })\n    })\n\n}\n\nexport function supportWasmUseVideoRender() {\n    return 'VideoFrame' in window;\n}\n\nexport function toNumber(value) {\n    if (typeof value !== 'string') {\n        return value;\n    } else {\n        // 转换成 number 类型\n        var parsed = Number(value);\n        return isNaN(parsed) ? value : parsed;\n    }\n}\n\nexport function uuid16() {\n    return 'xxxxxxxxxxxx4xxx'.replace(/[xy]/g, function (c) {\n        var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8)\n        return v.toString(16)\n    })\n}\n\nexport function throttle(callback, delay) {\n    let isThrottled = false;\n    let args;\n    let context;\n\n    function fn(...args2) {\n        if (isThrottled) {\n            args = args2;\n            context = this;\n            return;\n        }\n\n        isThrottled = true;\n        callback.apply(this, args2);\n        setTimeout(() => {\n            isThrottled = false;\n            if (args) {\n                fn.apply(context, args);\n                args = null;\n                context = null;\n            }\n        }, delay);\n    }\n\n    return fn;\n}\n\n\nexport function isDef(v) {\n    return v !== undefined && v !== null;\n}\n\nexport function formatVideoDecoderConfigure(avcC) {\n    let codecArray = avcC.subarray(1, 4);\n    let codecString = \"avc1.\";\n    for (let j = 0; j < 3; j++) {\n        let h = codecArray[j].toString(16);\n        if (h.length < 2) {\n            h = \"0\" + h\n        }\n        codecString += h\n    }\n\n    return {\n        codec: codecString,\n        description: avcC\n    }\n}\n\nexport function formatHevcVideoDecoderConfigure(hecvC) {\n    // The codec string begins with the prefix \"hev1.\" or \"hvc1.\", with a suffix of four dot-separated fields as described\n    // 'hvc1.2.4.L93.B0', //'hev1.1.6.H120.B0'\n    let codecArray = hecvC.subarray(1, 4);\n    // let codecString = \"hvc1.2.4.L93.B0\";\n    let codecString = 'hev1.1.6.L120.90';\n    // for (let j = 0; j < 3; j++) {\n    //     let h = codecArray[j].toString(16);\n    //     if (h.length < 2) {\n    //         h = \"0\" + h\n    //     }\n    //     codecString += h\n    // }\n\n    return {\n        codec: codecString,\n        description: hecvC\n    }\n}\n\n\nexport function isFullScreen() {\n    // return document.isFullScreen || document.mozIsFullScreen || document.webkitIsFullScreen;\n    return screenfull.isFullscreen\n}\n\n//\nexport function bpsSize(value) {\n    if (null == value || value === '') {\n        return \"0 KB/s\";\n    }\n    let size = parseFloat(value);\n    size = size.toFixed(2);\n    return size + 'KB/s';\n}\n\nexport function bpsSize$2(value) {\n    if (null == value || value === '' || parseFloat(value) === 0 || value === 'NaN') {\n        return \"0 KB/s\";\n    }\n    const unitArr = [\"KB/s\", \"MB/s\", \"GB/s\", \"TB/s\", \"PB/s\", \"EB/s\", \"ZB/s\", \"YB/s\"];\n    let index = 0;\n    const srcsize = parseFloat(value);\n    index = Math.floor(Math.log(srcsize) / Math.log(1024));\n    let size = srcsize / Math.pow(1024, index);\n    size = size.toFixed(2);//\n    return size + (unitArr[index] || unitArr[0]);\n}\n\nexport function formatFileSize(value) {\n    if (null == value || value == '') {\n        return \"0 Bytes\";\n    }\n    const unitArr = new Array(\"Bytes\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\");\n    let index = 0;\n    const srcsize = parseFloat(value);\n    index = Math.floor(Math.log(srcsize) / Math.log(1024));\n    var size = srcsize / Math.pow(1024, index);\n    size = size.toFixed(2);//保留的小数位数\n    return size + unitArr[index];\n}\n\nexport function isNumber(value) {\n    const toString = Object.prototype.toString;\n    return toString.call(value) === \"[object Number]\";\n}\n\n\nexport function fpsStatus(fps) {\n    let result = 0;\n    if (fps >= 24) {\n        result = 2;\n    } else if (fps >= 15) {\n        result = 1;\n    }\n\n    return result;\n}\n\nexport function createEmptyImageBitmap(width, height) {\n    const $canvasElement = document.createElement(\"canvas\");\n    $canvasElement.width = width;\n    $canvasElement.height = height;\n    const imageBitmap = window.createImageBitmap($canvasElement, 0, 0, width, height);\n    // release canvas\n    $canvasElement.width = 0;\n    $canvasElement.height = 0;\n    return imageBitmap;\n}\n\n\nexport function supportMSE() {\n    let result = false;\n    if ('MediaSource' in window && window.MediaSource.isTypeSupported(MP4_CODECS.avc)) {\n        result = true;\n    }\n    return result;\n}\n\n//\nexport function supportMSEDecodeHevc() {\n    let result = false;\n    if ('MediaSource' in window && window.MediaSource.isTypeSupported(MP4_CODECS.hev)) {\n        result = true;\n    }\n    return result;\n}\n\n// 查看是否webcodecs 支持 hevc解码\n// chrome 107\nexport function supportWCSDecodeHevc() {\n    const browserInfo = getBrowser();\n    return browserInfo.type.toLowerCase() === 'chrome' && browserInfo.version >= 107;\n}\n\nexport function supportMediaStreamTrack() {\n    let result = false;\n    if ('MediaStreamTrackGenerator' in window) {\n        result = true;\n    }\n    return result\n}\n\nexport function supportMediaStream() {\n    let result = false;\n    if ('MediaStream' in window) {\n        result = true;\n    }\n    return result;\n}\n\n\nexport function formatMp4VideoCodec(codec) {\n    return `video/mp4; codecs=\"${codec}\"`\n}\n\n\nexport function saveBlobToFile(fileName, blob) {\n    let url = window.URL.createObjectURL(blob);\n    let aLink = window.document.createElement('a');\n    aLink.download = fileName;\n    aLink.href = url;\n    //创建内置事件并触发\n    let evt = window.document.createEvent('MouseEvents');\n    evt.initEvent(\"click\", true, true); //initEvent 不加后两个参数在FF下会报错  事件类型，是否冒泡，是否阻止浏览器的默认行为\n    aLink.dispatchEvent(evt);\n    setTimeout(() => {\n        window.URL.revokeObjectURL(url);\n    }, isIOS() ? 1000 : 0)\n}\n\nexport function isEmpty(value) {\n    return value === null || value === undefined\n}\n\nexport function isBoolean(value) {\n    return value === true || value === false;\n}\n\nexport function isNotEmpty(value) {\n    return !isEmpty(value)\n}\n\nexport function initPlayTimes() {\n    return {\n        playInitStart: '', //1\n        playStart: '', // 2\n        streamStart: '', //3\n        streamResponse: '', // 4\n        demuxStart: '', // 5\n        decodeStart: '', // 6\n        videoStart: '', // 7\n        playTimestamp: '',// playStart- playInitStart\n        streamTimestamp: '',// streamStart - playStart\n        streamResponseTimestamp: '',// streamResponse - streamStart\n        demuxTimestamp: '', // demuxStart - streamResponse\n        decodeTimestamp: '', // decodeStart - demuxStart\n        videoTimestamp: '',// videoStart - decodeStart\n        allTimestamp: '' // videoStart - playInitStart\n    }\n}\n\nfunction _formatWatermarkOptions(options) {\n    let defaultConfig = {\n        container: '',\n        left: '',\n        right: '',\n        top: '',\n        bottom: '',\n        opacity: 1,\n        backgroundColor: '',\n        image: {\n            src: '',\n            width: '100',\n            height: '60'\n        },\n        text: {\n            content: '',\n            fontSize: '14',\n            color: '#000'\n        },\n    }\n    const imageConfig = Object.assign(defaultConfig.image, options.image || {})\n    const textConfig = Object.assign(defaultConfig.text, options.text || {})\n    defaultConfig = Object.assign(defaultConfig, options, {\n        image: imageConfig,\n        text: textConfig\n    })\n\n    return defaultConfig;\n}\n\n\nexport function formatFullscreenWatermarkOptions(container, options) {\n    let defaultConfig = {\n        container: container || '',\n        text: '', // 文本\n        opacity: '',// 透明度\n        angle: '',// 倾斜角度\n        color: '',// 字体颜色\n        fontSize: '',// 字体大小\n        fontFamily: '',// 字体\n    }\n    defaultConfig = Object.assign(defaultConfig, options)\n    return {\n        watermark_parent_node: defaultConfig.container,\n        watermark_alpha: defaultConfig.opacity,\n        watermark_angle: defaultConfig.angle,\n        watermark_fontsize: defaultConfig.fontSize,\n        watermark_color: defaultConfig.color,\n        watermark_font: defaultConfig.fontFamily,\n        watermark_txt: defaultConfig.text,\n    }\n}\n\n// create watermark\nexport function createWatermark(options) {\n    let defaultConfig = _formatWatermarkOptions(options);\n    const $container = defaultConfig.container;\n\n    if (!$container) {\n        return\n    }\n\n    let shadowRoot = null;\n    const otDiv = document.createElement('div');\n    otDiv.setAttribute('style', 'pointer-events: none !important; display: block !important');\n\n    if (typeof otDiv.attachShadow === \"function\") {\n        shadowRoot = otDiv.attachShadow({mode: 'open'});\n    } else if (otDiv.shadowRoot) {\n        shadowRoot = otDiv.shadowRoot;\n    } else {\n        shadowRoot = otDiv;\n    }\n\n    const nodeList = $container.children;\n    const index = Math.floor(Math.random() * (nodeList.length - 1));\n\n    if (nodeList[index]) {\n        $container.insertBefore(otDiv, nodeList[index]);\n    } else {\n        $container.appendChild(otDiv);\n    }\n\n\n    const maskDiv = document.createElement('div');\n    let innerDom = null;\n    if (defaultConfig.image && defaultConfig.image.src) {\n        innerDom = document.createElement('img')\n        innerDom.style.height = '100%';\n        innerDom.style.width = '100%';\n        innerDom.style.objectFit = 'contain';\n        innerDom.src = defaultConfig.image.src;\n    } else if (defaultConfig.text && defaultConfig.text.content) {\n        innerDom = document.createTextNode(defaultConfig.text.content);\n    }\n\n    if (!innerDom) {\n        return;\n    }\n\n    maskDiv.appendChild(innerDom);\n\n    maskDiv.style.visibility = '';\n    maskDiv.style.position = \"absolute\";\n    maskDiv.style.display = 'block'\n    maskDiv.style['-ms-user-select'] = \"none\";\n    maskDiv.style['-moz-user-select'] = \"none\";\n    maskDiv.style['-webkit-user-select'] = \"none\";\n    maskDiv.style['-o-user-select'] = \"none\";\n    maskDiv.style['user-select'] = \"none\";\n    maskDiv.style['-webkit-touch-callout'] = \"none\";\n    maskDiv.style['-webkit-tap-highlight-color'] = \"rgba(0,0,0,0)\";\n    maskDiv.style['-webkit-text-size-adjust'] = \"none\";\n    maskDiv.style['-webkit-touch-callout'] = \"none\";\n    maskDiv.style.opacity = defaultConfig.opacity;\n    if (isNumber(defaultConfig.left)) {\n        maskDiv.style.left = defaultConfig.left + 'px';\n    }\n    if (isNumber(defaultConfig.right)) {\n        maskDiv.style.right = defaultConfig.right + 'px';\n    }\n    if (isNumber(defaultConfig.top)) {\n        maskDiv.style.top = defaultConfig.top + 'px';\n    }\n    if (isNumber(defaultConfig.bottom)) {\n        maskDiv.style.bottom = defaultConfig.bottom + 'px';\n    }\n    if (defaultConfig.backgroundColor) {\n        maskDiv.style.backgroundColor = defaultConfig.backgroundColor;\n    }\n    maskDiv.style.overflow = 'hidden';\n    maskDiv.style.zIndex = \"9999999\";\n    if (defaultConfig.image && defaultConfig.image.src) {\n        maskDiv.style.width = defaultConfig.image.width + 'px';\n        maskDiv.style.height = defaultConfig.image.height + 'px';\n    } else if (defaultConfig.text && defaultConfig.text.content) {\n        maskDiv.style.fontSize = defaultConfig.text.fontSize + 'px';\n        maskDiv.style.color = defaultConfig.text.color;\n    }\n\n    shadowRoot.appendChild(maskDiv)\n\n    // remove function\n    return () => {\n        $container.removeChild(otDiv);\n    }\n}\n\n// create image watermark\nexport function createImageWatermark(dataUrl, options) {\n    return new Promise((resolve, reject) => {\n        let defaultConfig = _formatWatermarkOptions(options);\n\n        if (!defaultConfig.image.src && !defaultConfig.text.content) {\n            return resolve(dataUrl);\n        }\n\n\n        let canvas = document.createElement('canvas')\n        canvas.width = options.width;\n        canvas.height = options.height;\n        let ctx = canvas.getContext('2d')\n        let x = 0;\n        let y = 0;\n        if (isNumber(defaultConfig.left)) {\n            x = defaultConfig.left;\n        } else if (isNumber(defaultConfig.right)) {\n            x = canvas.width - defaultConfig.right\n        }\n\n        if (isNumber(defaultConfig.top)) {\n            y = defaultConfig.top;\n        } else if (isNumber(defaultConfig.bottom)) {\n            y = canvas.height - defaultConfig.bottom;\n        }\n        const imag = new Image();\n        imag.src = dataUrl;\n        imag.onload = () => {\n            ctx.drawImage(imag, 0, 0);\n            if (defaultConfig.image && defaultConfig.image.src) {\n                const tempImage = new Image();\n                tempImage.src = defaultConfig.image.src;\n                tempImage.setAttribute(\"crossOrigin\", 'Anonymous')\n                tempImage.onload = () => {\n                    x -= defaultConfig.image.width;\n                    // y -= defaultConfig.image.height;\n                    ctx.drawImage(tempImage, x, y, defaultConfig.image.width, defaultConfig.image.height);\n                    resolve(canvas.toDataURL(options.format, options.quality));\n                }\n                tempImage.onerror = (e) => {\n                    reject();\n                }\n            } else if (defaultConfig.text && defaultConfig.text.content) {\n                // 设置填充字号和字体，样式\n                ctx.font = defaultConfig.text.fontSize + \"px 宋体\";\n                // color\n                ctx.fillStyle = defaultConfig.text.color;\n                // 设置右对齐\n                ctx.textAlign = 'right';\n                // 在指定位置绘制文字，这里指定距离右下角20坐标的地方\n                ctx.fillText(defaultConfig.text.content, x, y)\n                resolve(canvas.toDataURL(options.format, options.quality))\n            }\n        }\n\n        imag.onerror = (e) => {\n            reject(e)\n        }\n    })\n}\n\nexport function formatTimeTips(time) {\n    var result;\n\n    //\n    if (time > -1) {\n        var hour = Math.floor(time / 3600);\n        var min = Math.floor(time / 60) % 60;\n        var sec = time % 60;\n\n        sec = Math.round(sec);\n\n        if (hour < 10) {\n            result = '0' + hour + \":\";\n        } else {\n            result = hour + \":\";\n        }\n\n        if (min < 10) {\n            result += \"0\";\n        }\n        result += min + \":\";\n        if (sec < 10) {\n            result += \"0\";\n        }\n        result += sec.toFixed(0);\n    }\n\n    return result;\n}\n\n\n//\nexport function createVideoFrame(arrayBuffer, init) {\n    return new VideoFrame(arrayBuffer, init)\n}\n\n\nexport function getLocationSearch() {\n    var url = window.location.search; //获取url中\"?\"符后的字串\n    var theRequest = {};\n    if (url.indexOf(\"?\") != -1) {\n        var str = url.substr(1);\n        var strs = str.split(\"&\");\n        for (var i = 0; i < strs.length; i++) {\n            theRequest[strs[i].split(\"=\")[0]] = unescape(strs[i].split(\"=\")[1]);\n        }\n    }\n    return theRequest;\n};\n\n// min timestamp\nexport function formatMinTimeTips(time, second) {\n    let result = '';\n\n    //\n    if (time > -1) {\n        const hour = Math.floor(time / 60) % 60;\n        let min = time % 60;\n\n        min = Math.round(min);\n\n        if (hour < 10) {\n            result = '0' + hour + \":\";\n        } else {\n            result = hour + \":\";\n        }\n\n        if (min < 10) {\n            result += \"0\";\n        }\n        result += min;\n\n        if (!isEmpty(second)) {\n            if (second < 10) {\n                second = '0' + second;\n            }\n            result += (':' + second);\n        }\n    }\n\n    return result;\n}\n\n// second timestamp\nexport function formatSecondTimeTips(time) {\n    let result = '';\n    if (time > -1) {\n        const hour = Math.floor(time / 60 / 60) % 60;\n        let min = Math.floor(time / 60) % 60;\n        let second = time % 60\n\n        min = Math.round(min);\n\n        if (hour < 10) {\n            result = '0' + hour + \":\";\n        } else {\n            result = hour + \":\";\n        }\n\n        if (min < 10) {\n            result += \"0\";\n        }\n        result += min + ':';\n\n        if (second < 10) {\n            result += '0'\n        }\n        result += second\n    }\n\n    return result;\n}\n\n\nexport function formatSecondTime(time) {\n    let result = {};\n    if (time > -1) {\n        const hour = Math.floor(time / 60 / 60) % 60;\n        let min = Math.floor(time / 60) % 60;\n        let second = time % 60\n        result = {\n            hour,\n            min,\n            second\n        }\n    }\n\n    return result;\n}\n\n/**\n *\n * @param time\n */\nexport function formatMinuteTimestamp(day, time) {\n    const hour = Math.floor(time / 60) % 60;\n    const min = Math.floor(time % 60);\n    const nowMinuteTimestamp = new Date(day).setHours(\n        hour,\n        min,\n        0,\n        0\n    );\n    return nowMinuteTimestamp;\n}\n\nexport function formatSecondTimestamp(day, time) {\n    const hour = Math.floor(time / 60 / 60) % 60;\n    const min = Math.floor(time / 60) % 60;\n    const second = time % 60\n    const nowSecondTimestamp = new Date(day).setHours(\n        hour,\n        min,\n        second,\n        0\n    );\n    return nowSecondTimestamp;\n}\n\nexport function getStrLength(value) {\n    return ('' + value).length\n}\n\n\nexport function isEmptyObject(obj) {\n    return (obj && Object.keys(obj).length === 0)\n}\n\nexport function isNotEmptyObject(obj) {\n    return !isEmptyObject(obj);\n}\n\n\nexport function isString(value) {\n    return typeof value === \"string\";\n}\n\n\nexport function isSupportSIMD() {\n    return WebAssembly.validate(new Uint8Array([0, 97, 115, 109, 1, 0, 0, 0, 1, 5, 1, 96, 0, 1, 123, 3, 2, 1, 0, 10, 10, 1, 8, 0, 65, 0, 253, 15, 253, 98, 11]));\n}\n\n\nexport const isWeChat = () => {\n    const userAgent = window.navigator.userAgent;\n    return /MicroMessenger/i.test(userAgent)\n};\n\n//\nexport const isWeChatInAndroid = () => {\n    return isWeChat() && isAndroid();\n}\n\nexport const isWeChatInIOS = () => {\n    return isWeChat() && isIOS();\n}\n\n\nexport function getTarget(e) {\n    const event = e || window.event;\n    const target = event.target || event.srcElement;\n    return target;\n}\n\nconst _mime = function (option, value) {\n    const mimeTypes = navigator.mimeTypes;\n    for (let mt in mimeTypes) {\n        if (mimeTypes[mt][option] == value) {\n            return true;\n        }\n    }\n    return false;\n};\n\nexport function isWindow() {\n    let isWindows = false;\n    const agent = navigator.userAgent.toLowerCase();\n    const isMac = /macintosh|mac os x/i.test(navigator.userAgent);\n    if (agent.indexOf(\"win32\") >= 0 || agent.indexOf(\"wow32\") >= 0) {\n        //your code\n        isWindows = true;\n    }\n    if (agent.indexOf(\"win64\") >= 0 || agent.indexOf(\"wow64\") >= 0) {\n        //your code\n        isWindows = true;\n    }\n    if (isMac) {\n        //your code\n        isWindows = false;\n    }\n\n    return isWindows;\n}\n\nexport function isWindow360() {\n    const userAgent = window.navigator.userAgent;\n    let is360 = userAgent.indexOf('QihooBrowser') > -1 ||\n        userAgent.indexOf('QHBrowser') > -1 ||\n        userAgent.indexOf('360EE') > -1 ||\n        userAgent.indexOf('360SE') > -1;\n\n    if (!is360) {\n        if (window.chrome) {\n            const chrome_version = userAgent.replace(/^.*Chrome\\/([\\d]+).*$/, '$1');\n            if (_mime(\"type\", \"application/360softmgrplugin\") || _mime(\"type\", \"application/mozilla-npqihooquicklogin\")) {\n                is360 = true;\n            } else if (chrome_version > 36 && window.showModalDialog) {\n                is360 = true;\n            } else if (chrome_version > 45) {\n                is360 = _mime(\"type\", \"application/vnd.chromium.remoting-viewer\");\n                if (!is360 && chrome_version >= 69) {\n                    is360 = _mime(\"type\", \"application/hwepass2001.installepass2001\") || _mime(\"type\", \"application/asx\");\n                }\n            }\n        }\n    }\n\n    return is360 && isWindow();\n}\n\n\nexport function isFunction(fn) {\n    return typeof fn === \"function\"\n}\n\n\nexport function isSupportOfflineAudioContext() {\n    let offlineAudioContext = new OfflineAudioContext(1, 1, 44100);\n    return Boolean(offlineAudioContext.audioWorklet && typeof offlineAudioContext.audioWorklet.addModule == \"function\")\n}\n\n\nexport function isWebglRenderSupport(width) {\n    return (width / 2) % 4 === 0\n}\n\n/**\n * is green yuv\n * @param arrayBuffer\n * @returns {boolean}\n */\nexport function isGreenYUV(arrayBuffer) {\n    let zeroNum = 0;\n    for (let i = 0; i < arrayBuffer.length; i++) {\n        let temp = arrayBuffer[i];\n        if (temp === 0) {\n            zeroNum += 1\n        }\n    }\n    const isGreen = zeroNum === arrayBuffer.length;\n    if (isGreen) {\n        console.log('green yuv', arrayBuffer)\n    }\n    return isGreen\n}\n\n/**\n *\n * @param event\n * @returns {{posX: number, posY: number}}\n */\nexport function getMousePosition(event) {\n    let posX = 0;\n    let posY = 0;\n    const e = event || window.event;  //标准化事件对象\n    if (e.pageX || e.pageY) {  //获取鼠标指针的当前坐标值\n        posX = e.pageX;\n        posY = e.pageY;\n    } else if (e.clientX || e.clientY) {\n        posX = event.clientX + document.documentElement.scrollLeft + document.body.scrollLeft;\n        posY = event.clientY + document.documentElement.scrollTop + document.body.scrollTop;\n    }\n    return {\n        posX,\n        posY\n    }\n}\n\nexport function canPlayAppleMpegurl() {\n    let video = document.createElement('video');\n    let result = video.canPlayType('application/vnd.apple.mpegurl')\n    video = null;\n    return result;\n}\n\n\nexport function isSupportGetUserMedia() {\n    let result = false;\n    const navigator = window.navigator;\n\n    if (navigator) {\n        result = !!(navigator.mediaDevices && navigator.mediaDevices.getUserMedia)\n\n        if (!result) {\n            result = !!(navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia)\n        }\n    }\n\n    return result;\n}\n\nexport function onlyMseOrWcsVideo(opt) {\n    return opt.hasAudio === false && (opt.useMSE || (opt.useWCS && !opt.useOffscreen))\n}\n\nexport function checkNaluType(naluBuffer) {\n    let result = null;\n    let type = naluBuffer[0] & 0b0001_1111;\n    if (type === H264_NAL_TYPE.sps || type === H264_NAL_TYPE.pps) {\n        result = VIDEO_ENC_TYPE_SHOW.h264;\n    }\n    if (!result) {\n        type = (naluBuffer[0] & 0x7E) >> 1;\n        if (type === H265_NAL_TYPE.vps || type === H265_NAL_TYPE.sps || type === H265_NAL_TYPE.pps) {\n            result = VIDEO_ENC_TYPE_SHOW.h265;\n        }\n    }\n\n    return result;\n}\n\n\nexport function checkAudioNaluType(naluBuffer) {\n    let result = null;\n    const codecId = naluBuffer[0] >> 4;\n\n    if (isAacCodecPacket(naluBuffer)) {\n        result = AUDIO_ENC_CODE_SHOW.AAC\n    } else if (codecId === AUDIO_ENC_CODE.ALAW) {\n        result = AUDIO_ENC_CODE_SHOW.ALAW\n    } else if (codecId === AUDIO_ENC_CODE.MULAW) {\n        result = AUDIO_ENC_CODE_SHOW.MULAW\n    }\n\n    return result;\n}\n\n\nexport function createWorkletModuleUrl(func) {\n\n    function functionToString(str) {\n        return str.trim().match(/^function\\s*\\w*\\s*\\([\\w\\s,]*\\)\\s*{([\\w\\W]*?)}$/)[1]\n    }\n\n    const funcStr = functionToString(func.toString());\n    const blob = new Blob([funcStr], {type: 'application/javascript'});\n    return URL.createObjectURL(blob);\n}\n\nexport function supportWritableStream() {\n    return typeof WritableStream !== 'undefined';\n}\n\n\nexport function closeVideoFrame(videoFrame) {\n    if (videoFrame.close) {\n        videoFrame.close()\n    } else if (videoFrame.destroy) {\n        videoFrame.destroy()\n    }\n}\n\nexport function isInHttps() {\n    return window.location.protocol === 'https:' || window.location.hostname === 'localhost';\n}\n\nexport function errorToString(error) {\n    const nativeToString = Object.prototype.toString;\n\n    function isErrorLike(error) {\n        switch (nativeToString.call(error)) {\n            case '[object Error]':\n                return true;\n            case '[object Exception]':\n                return true;\n            case '[object DOMException]':\n                return true;\n            default:\n                try {\n                    return error instanceof Error;\n                } catch (e) {\n                    return false;\n                }\n        }\n    }\n\n    if (isErrorLike(error)) {\n        return error.message;\n    } else {\n        return error == null\n            ? '' :\n            typeof error === 'object'\n                ? JSON.stringify(error, null, 2)\n                : String(error)\n    }\n}\n\n\nexport function isInSampleHost(url) {\n    let result = false;\n\n\n    return result;\n}\n\n\nexport function calcStreamFpsByBufferList(bufferList, type) {\n\n    if (type) {\n        bufferList = bufferList.filter(item => item.type === type)\n    }\n\n    let firstItem = bufferList[0];\n    let oneSecondLength = null;\n    let nextIndex = 1;\n    if (bufferList.length > 0) {\n        let nextItem = bufferList[1];\n        if (nextItem && nextItem.ts - firstItem.ts > 100000) {\n            firstItem = nextItem;\n            nextIndex = 2;\n        }\n    }\n\n    if (firstItem) {\n        // next start\n        for (let i = nextIndex; i < bufferList.length; i++) {\n            let tempItem = bufferList[i];\n            if (type && tempItem.type !== type) {\n                tempItem = null;\n            }\n            if (tempItem) {\n                const diff = tempItem.ts - firstItem.ts;\n                if (diff >= 1000) {\n                    const prevTempItem = bufferList[i - 1];\n                    const diff2 = prevTempItem.ts - firstItem.ts;\n                    if (diff2 < 1000) {\n                        oneSecondLength = i + 1;\n                    }\n                }\n            }\n        }\n    }\n\n    return oneSecondLength;\n}\n\n\nexport function isFetchSuccess(res) {\n    return (res.ok && (res.status >= 200 && res.status <= 299))\n}\n\n// stroke rect or text in canvas\nexport function strokeRectOrTextInCanvas({ctx, list}) {\n    ctx.save();\n    (list || []).forEach(item => {\n        if (item.type === 'text') {\n            ctx.font = `${item.fontSize || 12}px Arial`;\n            ctx.fillStyle = item.color || 'green';\n            ctx.fillText(item.text, item.x, item.y);\n        } else if (item.type === 'rect') {\n            ctx.strokeStyle = item.color || 'green';\n            ctx.lineWidth = item.lineWidth || 2;\n            ctx.strokeRect(item.x, item.y, item.width, item.height);\n        }\n    })\n    ctx.restore();\n}\n\n\n// stroke text in canvas\nexport function strokeTextInCanvas({ctx, color, fontSize, text, x, y}) {\n    ctx.save();\n    ctx.font = `${fontSize || 12}px Arial`;\n    ctx.fillStyle = color || 'green';\n    ctx.fillText(text, x, y);\n    ctx.restore();\n}\n\n\nexport function getRandomInt(min, max) {\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\n\nexport function getUrlRelativePath(href) {\n    const url = href || document.location.toString();\n    const arrUrl = url.split(\"//\");\n\n    const start = arrUrl[1].indexOf(\"/\");\n    let relUrl = arrUrl[1].substring(start);//stop省略，截取从start开始到结尾的所有字符\n\n    if (relUrl.indexOf(\"?\") != -1) {\n        relUrl = relUrl.split(\"?\")[0];\n    }\n    return relUrl;\n}\n\nexport function base64Decode(data) {\n    const utf8Decode = function (str_data) {\n        var tmp_arr = [], i = 0, ac = 0, c1 = 0, c2 = 0, c3 = 0;\n        // 变成string类型\n        str_data += '';\n\n        while (i < str_data.length) {\n            c1 = str_data.charCodeAt(i);\n            if (c1 < 128) {\n                tmp_arr[ac++] = String.fromCharCode(c1);\n                i++;\n            } else if (c1 > 191 && c1 < 224) {\n                c2 = str_data.charCodeAt(i + 1);\n                tmp_arr[ac++] = String.fromCharCode(((c1 & 31) << 6) | (c2 & 63));\n                i += 2;\n            } else {\n                c2 = str_data.charCodeAt(i + 1);\n                c3 = str_data.charCodeAt(i + 2);\n                tmp_arr[ac++] = String.fromCharCode(((c1 & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\n                i += 3;\n            }\n        }\n\n        return tmp_arr.join('');\n    };\n\n    const b64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n    let o1, o2, o3, h1, h2, h3, h4, bits, i = 0, ac = 0, dec = \"\", tmp_arr = [];\n    if (!data) {\n        return data;\n    }\n    data += '';\n    do {\n        h1 = b64.indexOf(data.charAt(i++));\n        h2 = b64.indexOf(data.charAt(i++));\n        h3 = b64.indexOf(data.charAt(i++));\n        h4 = b64.indexOf(data.charAt(i++));\n        bits = h1 << 18 | h2 << 12 | h3 << 6 | h4;\n        o1 = bits >> 16 & 0xff;\n        o2 = bits >> 8 & 0xff;\n        o3 = bits & 0xff;\n        if (h3 == 64) {\n            tmp_arr[ac++] = String.fromCharCode(o1);\n        } else if (h4 == 64) {\n            tmp_arr[ac++] = String.fromCharCode(o1, o2);\n        } else {\n            tmp_arr[ac++] = String.fromCharCode(o1, o2, o3);\n        }\n    } while (i < data.length);\n    dec = tmp_arr.join('');\n    dec = utf8Decode(dec);\n    return dec;\n}\n\nexport function b64toUin8(base64String) {\n    var padding = '='.repeat((4 - base64String.length % 4) % 4);\n    var base64 = (base64String + padding)\n        .replace(/\\-/g, '+')\n        .replace(/_/g, '/');\n\n    var rawData = window.atob(base64);\n    var outputArray = new Uint8Array(rawData.length);\n\n    for (var i = 0; i < rawData.length; ++i) {\n        outputArray[i] = rawData.charCodeAt(i);\n    }\n    return outputArray;\n}\n\nexport function base64ToString(base64String) {\n    const padding = '='.repeat((4 - base64String.length % 4) % 4);\n    const base64 = (base64String + padding)\n        .replace(/\\-/g, '+')\n        .replace(/_/g, '/');\n\n    const rawData = window.atob(base64);\n    let result = '';\n\n    for (let i = 0; i < rawData.length; ++i) {\n        result += rawData.charCodeAt(i);\n    }\n    return result;\n}\n\n\nexport function resolveUrl(url) {\n    const msie = /(msie|trident)/i.test(navigator.userAgent);\n    const urlParsingNode = document.createElement('a');\n    let href = url;\n\n    if (msie) {\n        urlParsingNode.setAttribute('href', href);\n        href = urlParsingNode.href;\n    }\n\n    urlParsingNode.setAttribute('href', href);\n\n\n    return {\n        origin: urlParsingNode.origin,\n        href: urlParsingNode.href,\n        protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n        host: urlParsingNode.host,\n        search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n        hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n        hostname: urlParsingNode.hostname,\n        port: urlParsingNode.port,\n        pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n            urlParsingNode.pathname :\n            '/' + urlParsingNode.pathname\n    };\n}\n\n\nexport function uuid4() {\n    return 'xxxx'.replace(/[xy]/g, function (c) {\n        var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8)\n        return v.toString(16)\n    })\n}\n\nexport function clone(obj) {\n    let result = '';\n    //\n    if (typeof obj === 'object') {\n        try {\n            result = JSON.stringify(obj);\n            result = JSON.parse(result);\n        } catch (e) {\n            result = obj;\n        }\n    } else {\n        result = obj;\n    }\n\n    return result;\n}\n\n/**\n *\n * @returns {object:DEFAULT_JESSIBUCA_OPTIONS}\n */\nexport function getDefaultJessibucaOptions() {\n    return clone(DEFAULT_JESSIBUCA_OPTIONS);\n}\n\n/**\n *\n * @returns {object:DEFAULT_PLAYER_OPTIONS}\n */\nexport function getDefaultPlayerOptions() {\n    return clone(DEFAULT_PLAYER_OPTIONS);\n}\n\n/**\n *\n * @returns {object:DEFAULT_TALK_OPTIONS}\n */\nexport function getDefaultTalkOptions() {\n    return clone(DEFAULT_TALK_OPTIONS);\n}\n\n\n/**\n *\n * @returns {object:CONTROL_BUTTON_OPTIONS}\n */\nexport function getDefaultButtonOptions() {\n    return clone(CONTROL_BUTTON_OPTIONS);\n}\n\n\n/**\n *\n * @returns {object:MENU_ITEM_OPTIONS}\n */\nexport function getDefaultMenuOptions() {\n    return clone(MENU_ITEM_OPTIONS);\n}\n\n\n/**\n *\n * @returns {object:DEFAULT_MULTI_OPTIONS}\n */\nexport function getDefaultMultiOptions() {\n    return clone(DEFAULT_MULTI_OPTIONS);\n}\n\n\nexport function base64ToBlob(base64Data) {\n    const byteString = atob(base64Data.split(\",\")[1]);\n    const mimeType = base64Data.match(/:(.*?);/)[1];\n    const ab = new ArrayBuffer(byteString.length);\n    const ia = new Uint8Array(ab);\n    for (let i = 0; i < byteString.length; i++) {\n        ia[i] = byteString.charCodeAt(i);\n    }\n    return new Blob([ab], {type: mimeType});\n}\n\nexport function createCanvasImage(base64Data) {\n    return new Promise((resolve, reject) => {\n        const canvas = document.createElement(\"canvas\");\n        const context = canvas.getContext(\"2d\");\n\n        const image = new Image();\n        image.onload = () => {\n            canvas.width = image.width;\n            canvas.height = image.height;\n            context.drawImage(image, 0, 0);\n            const posterUrl = canvas.toDataURL(\"image/png\");\n            // clear\n            context.clearRect(0, 0, canvas.width, canvas.height);\n            canvas.width = 0;\n            canvas.height = 0;\n            //\n            resolve(posterUrl);\n        };\n        image.onerror = (e) => {\n            reject(e)\n        }\n        image.src = base64Data;\n    })\n\n}\n","export default class Resampler {\n    constructor(options) {\n        const {fromSampleRate, toSampleRate, channels, inputBufferSize} = options;\n\n        if (!fromSampleRate || !toSampleRate || !channels) {\n            throw(new Error(\"Invalid settings specified for the resampler.\"));\n        }\n        this.resampler = null;\n        this.fromSampleRate = fromSampleRate;\n        this.toSampleRate = toSampleRate;\n        this.channels = channels || 0;\n        this.inputBufferSize = inputBufferSize;\n        this.initialize()\n    }\n\n    initialize() {\n        if (this.fromSampleRate == this.toSampleRate) {\n\n            // Setup resampler bypass - Resampler just returns what was passed through\n            this.resampler = (buffer) => {\n                return buffer\n            };\n            this.ratioWeight = 1;\n\n        } else {\n\n            if (this.fromSampleRate < this.toSampleRate) {\n\n                // Use generic linear interpolation if upsampling,\n                // as linear interpolation produces a gradient that we want\n                // and works fine with two input sample points per output in this case.\n                this.linearInterpolation();\n                this.lastWeight = 1;\n\n            } else {\n\n                // Custom resampler I wrote that doesn't skip samples\n                // like standard linear interpolation in high downsampling.\n                // This is more accurate than linear interpolation on downsampling.\n                this.multiTap();\n                this.tailExists = false;\n                this.lastWeight = 0;\n            }\n\n            // Initialize the internal buffer:\n            this.initializeBuffers();\n            this.ratioWeight = this.fromSampleRate / this.toSampleRate;\n        }\n    }\n\n    bufferSlice(sliceAmount) {\n\n        //Typed array and normal array buffer section referencing:\n        try {\n            return this.outputBuffer.subarray(0, sliceAmount);\n        } catch (error) {\n            try {\n                //Regular array pass:\n                this.outputBuffer.length = sliceAmount;\n                return this.outputBuffer;\n            } catch (error) {\n                //Nightly Firefox 4 used to have the subarray function named as slice:\n                return this.outputBuffer.slice(0, sliceAmount);\n            }\n        }\n    }\n\n    initializeBuffers() {\n        this.outputBufferSize = (Math.ceil(this.inputBufferSize * this.toSampleRate / this.fromSampleRate / this.channels * 1.000000476837158203125) + this.channels) + this.channels;\n        try {\n            this.outputBuffer = new Float32Array(this.outputBufferSize);\n            this.lastOutput = new Float32Array(this.channels);\n        } catch (error) {\n            this.outputBuffer = [];\n            this.lastOutput = [];\n        }\n    }\n\n    linearInterpolation() {\n        this.resampler = (buffer) => {\n            let bufferLength = buffer.length,\n                channels = this.channels,\n                outLength,\n                ratioWeight,\n                weight,\n                firstWeight,\n                secondWeight,\n                sourceOffset,\n                outputOffset,\n                outputBuffer,\n                channel;\n\n            if ((bufferLength % channels) !== 0) {\n                throw(new Error(\"Buffer was of incorrect sample length.\"));\n            }\n            if (bufferLength <= 0) {\n                return [];\n            }\n\n            outLength = this.outputBufferSize;\n            ratioWeight = this.ratioWeight;\n            weight = this.lastWeight;\n            firstWeight = 0;\n            secondWeight = 0;\n            sourceOffset = 0;\n            outputOffset = 0;\n            outputBuffer = this.outputBuffer;\n\n            for (; weight < 1; weight += ratioWeight) {\n                secondWeight = weight % 1;\n                firstWeight = 1 - secondWeight;\n                this.lastWeight = weight % 1;\n                for (channel = 0; channel < this.channels; ++channel) {\n                    outputBuffer[outputOffset++] = (this.lastOutput[channel] * firstWeight) + (buffer[channel] * secondWeight);\n                }\n            }\n            weight -= 1;\n            for (bufferLength -= channels, sourceOffset = Math.floor(weight) * channels; outputOffset < outLength && sourceOffset < bufferLength;) {\n                secondWeight = weight % 1;\n                firstWeight = 1 - secondWeight;\n                for (channel = 0; channel < this.channels; ++channel) {\n                    outputBuffer[outputOffset++] = (buffer[sourceOffset + ((channel > 0) ? (channel) : 0)] * firstWeight) + (buffer[sourceOffset + (channels + channel)] * secondWeight);\n                }\n                weight += ratioWeight;\n                sourceOffset = Math.floor(weight) * channels;\n            }\n            for (channel = 0; channel < channels; ++channel) {\n                this.lastOutput[channel] = buffer[sourceOffset++];\n            }\n            return this.bufferSlice(outputOffset);\n        };\n    }\n\n    multiTap() {\n        this.resampler = (buffer) => {\n            let bufferLength = buffer.length,\n                outLength,\n                output_variable_list,\n                channels = this.channels,\n                ratioWeight,\n                weight,\n                channel,\n                actualPosition,\n                amountToNext,\n                alreadyProcessedTail,\n                outputBuffer,\n                outputOffset,\n                currentPosition;\n\n            if ((bufferLength % channels) !== 0) {\n                throw(new Error(\"Buffer was of incorrect sample length.\"));\n            }\n            if (bufferLength <= 0) {\n                return [];\n            }\n\n            outLength = this.outputBufferSize;\n            output_variable_list = [];\n            ratioWeight = this.ratioWeight;\n            weight = 0;\n            actualPosition = 0;\n            amountToNext = 0;\n            alreadyProcessedTail = !this.tailExists;\n            this.tailExists = false;\n            outputBuffer = this.outputBuffer;\n            outputOffset = 0;\n            currentPosition = 0;\n\n            for (channel = 0; channel < channels; ++channel) {\n                output_variable_list[channel] = 0;\n            }\n\n            do {\n                if (alreadyProcessedTail) {\n                    weight = ratioWeight;\n                    for (channel = 0; channel < channels; ++channel) {\n                        output_variable_list[channel] = 0;\n                    }\n                } else {\n                    weight = this.lastWeight;\n                    for (channel = 0; channel < channels; ++channel) {\n                        output_variable_list[channel] = this.lastOutput[channel];\n                    }\n                    alreadyProcessedTail = true;\n                }\n                while (weight > 0 && actualPosition < bufferLength) {\n                    amountToNext = 1 + actualPosition - currentPosition;\n                    if (weight >= amountToNext) {\n                        for (channel = 0; channel < channels; ++channel) {\n                            output_variable_list[channel] += buffer[actualPosition++] * amountToNext;\n                        }\n                        currentPosition = actualPosition;\n                        weight -= amountToNext;\n                    } else {\n                        for (channel = 0; channel < channels; ++channel) {\n                            output_variable_list[channel] += buffer[actualPosition + ((channel > 0) ? channel : 0)] * weight;\n                        }\n                        currentPosition += weight;\n                        weight = 0;\n                        break;\n                    }\n                }\n\n                if (weight === 0) {\n                    for (channel = 0; channel < channels; ++channel) {\n                        outputBuffer[outputOffset++] = output_variable_list[channel] / ratioWeight;\n                    }\n                } else {\n                    this.lastWeight = weight;\n                    for (channel = 0; channel < channels; ++channel) {\n                        this.lastOutput[channel] = output_variable_list[channel];\n                    }\n                    this.tailExists = true;\n                    break;\n                }\n            } while (actualPosition < bufferLength && outputOffset < outLength);\n            return this.bufferSlice(outputOffset);\n        };\n    }\n\n    resample(buffer) {\n        if (this.fromSampleRate == this.toSampleRate) {\n            this.ratioWeight = 1;\n        } else {\n            if (this.fromSampleRate < this.toSampleRate) {\n                this.lastWeight = 1;\n            } else {\n                this.tailExists = false;\n                this.lastWeight = 0;\n            }\n            this.initializeBuffers();\n            this.ratioWeight = this.fromSampleRate / this.toSampleRate;\n        }\n        return this.resampler(buffer)\n    }\n}\n","/**\n * 将无符号Float32Array数组转化成有符号的Int16Array数组\n * @param {Float32Array} input unsinged Float32Array\n * @return {Int16Array} singed int16\n */\nexport function floatTo16BitPCM(input) {\n    let i = input.length;\n    let output = new Int16Array(i);\n    while (i--) {\n        let s = Math.max(-1, Math.min(1, input[i]));\n        output[i] = (s < 0 ? s * 0x8000 : s * 0x7FFF);\n    }\n    return output;\n}\n\n/**\n * 将有符号的Int16Array数组转化成无符号Float32Array数组\n * @param {Int16Array} input singed int16\n * @return {Float32Array}  // unsinged float32\n */\nexport function int16ToFloat32BitPCM(input) {\n    let i = input.length;\n    let output = new Float32Array(i);\n    while (i--) {\n        let int = input[i];\n        output[i] = (int >= 0x8000) ? -(0x10000 - int) / 0x8000 : int / 0x7FFF;\n    }\n    return output;\n}\n\n/**\n * 将无符号Float32Array数组转化成有符号的Int8Array数组\n * @param {Float32Array} input unsinged Float32Array\n * @return {Int8Array} singed int8\n */\nexport function floatTo8BitPCM(input) {\n    let i = input.length;\n    let output = new Int8Array(i);\n    while (i--) {\n        let s = Math.max(-1, Math.min(1, input[i]));\n        const temp = (s < 0 ? s * 0x8000 : s * 0x7FFF);\n        output[i] = parseInt(255 / (65535 / (32768 + temp)), 10)\n    }\n    return output;\n}\n\n/**\n * 将有符号的Int8Array数组转化成无符号Float32Array数组\n * @param {Int8Array} singed int8\n * @return {Float32Array}  // unsinged float32\n */\nexport function int8ToFloat32BitPCM(input) {\n    let i = input.length;\n    let output = new Float32Array(i);\n\n    return output;\n}\n","import {AUDIO_ENC_CODE} from \"../constant\";\n\nconst SIGN_BIT = 0x80;\nconst QUANT_MASK = 0xf;\nconst NSEGS = 8;\nconst SEG_SHIFT = 4;\nconst SEG_MASK = 0x70;\nconst BIAS = 0x84;\nconst segEnd = [0xFF, 0x1FF, 0x3FF, 0x7FF, 0xFFF, 0x1FFF, 0x3FFF, 0x7FFF]\n\n\nfunction _search(val, table, size) {\n    for (let i = 0; i < size; i++) {\n        if (val <= table[i]) {\n            return i;\n        }\n    }\n    return size\n}\n\n// alaw\nfunction _linear2alaw(pcmVal) {\n    let mask;\n    let seg;\n    let aval;\n    if (pcmVal >= 0) {\n        mask = 0xD5\n    } else {\n        mask = 0x55\n\n        // pcmVal = -pcmVal - 8;\n        pcmVal = (-pcmVal - 1)\n        if (pcmVal < 0) {\n            pcmVal = 32767\n        }\n    }\n    /* Convert the scaled magnitude to segment number. */\n    seg = _search(pcmVal, segEnd, 8)\n\n    if (seg >= 8) {\n        return (0x7F ^ mask);\n    } else {\n        aval = (seg << SEG_SHIFT);\n\n        if (seg < 2) {\n            aval |= ((pcmVal >> 4) & QUANT_MASK);\n        } else {\n            aval |= ((pcmVal >> (seg + 3)) & QUANT_MASK);\n        }\n        return (aval ^ mask)\n    }\n}\n\nfunction _alaw2linear(aVal) {\n    let t;\n    let seg;\n\n    aVal ^= 0x55;\n    t = ((aVal & QUANT_MASK) << 4)\n    seg = ((aVal & SEG_MASK) >> SEG_SHIFT);\n    switch (seg) {\n        case 0:\n            t += 8;\n            break;\n        case 1:\n            t += 0x108;\n            break;\n        default:\n            t += 0x108;\n            t <<= seg - 1;\n    }\n    return ((aVal & SIGN_BIT) != 0 ? t : -t);\n}\n\n\n// ulaw\nfunction _linear2ulaw(pcmVal) {\n    let mask = 0;\n    if (pcmVal < 0) {\n        pcmVal = BIAS - pcmVal;\n        mask = 0x7F;\n    } else {\n        pcmVal += BIAS;\n        mask = 0xFF;\n    }\n    let seg = _search(pcmVal, segEnd, 8)\n    if (seg >= 8) {\n        return (0x7F ^ mask)\n    } else {\n        let uval = (seg << 4) | ((pcmVal >> (seg + 3)) & 0xF)\n        return (uval ^ mask)\n    }\n}\n\nfunction _ulaw2linear(uVal) {\n    uVal = ~uVal;\n    let t = ((uVal & QUANT_MASK) << 3) + BIAS;\n    t <<= ((uVal & SEG_MASK) >> SEG_SHIFT)\n    return ((uVal & SIGN_BIT) ? (BIAS - t) : (t - BIAS));\n}\n\n// pcm to g711a\nexport function g711aEncoder(typedArray) {\n    const g711Array = [];\n    const tempArray = Array.prototype.slice.call(typedArray);\n    tempArray.forEach((i, index) => {\n        g711Array[index] = _linear2alaw(i)\n    })\n    return g711Array;\n}\n\n// g711a to pcm(float32Array)\nexport function g711aDecoder(array) {\n    const pcmArray = [];\n    array.forEach((i) => {\n        pcmArray[i] = _alaw2linear(i)\n    })\n    //\n    return pcmArray;\n}\n\n// g711u\nexport function g711uEncoder(typedArray) {\n    const g711Array = [];\n    const tempArray = Array.prototype.slice.call(typedArray);\n    tempArray.forEach((i, index) => {\n        g711Array[index] = _linear2ulaw(i)\n    })\n    return g711Array;\n}\n\n// g711u\nexport function g711uDecoder(array) {\n    const pcmArray = [];\n    array.forEach((i) => {\n        pcmArray[i] = _ulaw2linear(i)\n    })\n    //\n    return pcmArray;\n}\n\nexport function g711EncoderNalePacket(arrayItem) {\n    return arrayItem;\n}\n\nexport function isG711CodecPacket(payload) {\n    const codecId = (payload[0] >> 4)\n    return codecId === AUDIO_ENC_CODE.ALAW || codecId === AUDIO_ENC_CODE.MULAW\n}\n","import {DEBUG_LEVEL} from \"../constant\";\n\nexport default class Debug {\n    constructor(master) {\n        this.log = (name, ...args) => {\n            if (master._opt.debug && master._opt.debugLevel == DEBUG_LEVEL.debug) {\n                const prefix = master._opt.debugUuid ? `[${master._opt.debugUuid}]` : '';\n                console.log(`JessibucaPro${prefix}:[\\u2705\\u2705\\u2705][${name}]`, ...args);\n            }\n        };\n\n        this.warn = (name, ...args) => {\n            if (master._opt.debug && (master._opt.debugLevel == DEBUG_LEVEL.debug || master._opt.debugLevel == DEBUG_LEVEL.warn)) {\n                const prefix = master._opt.debugUuid ? `[${master._opt.debugUuid}]` : '';\n                console.log(`JessibucaPro${prefix}:[\\u2757\\u2757\\u2757][${name}]`, ...args);\n            }\n        };\n\n        this.error = (name, ...args) => {\n            const prefix = master._opt.debugUuid ? `[${master._opt.debugUuid}]` : '';\n            console.error(`JessibucaPro${prefix}:[\\u274C\\u274C\\u274C][${name}]`, ...args);\n        };\n    }\n}\n","import {isFunction} from \"./index\";\n\nexport default class Events {\n    constructor(master) {\n        this.destroys = [];\n        this.proxy = this.proxy.bind(this);\n        this.master = master;\n    }\n\n    proxy(target, name, callback, option = {}) {\n        if (!target) {\n            return;\n        }\n        if (Array.isArray(name)) {\n            return name.map(item => this.proxy(target, item, callback, option));\n        }\n        target.addEventListener(name, callback, option);\n        const destroy = () => {\n            if (isFunction(target.removeEventListener)) {\n                target.removeEventListener(name, callback, option)\n            }\n        };\n        this.destroys.push(destroy);\n        return destroy;\n    }\n\n    destroy() {\n        this.master.debug && this.master.debug.log(`Events`, 'destroy');\n        this.destroys.forEach(event => event());\n    }\n}\n","import Emitter from \"../utils/emitter\";\nimport {\n    clamp,\n    createWorkletModuleUrl,\n    getDefaultTalkOptions,\n    isEmpty,\n    isSupportGetUserMedia,\n    now,\n    uuid16\n} from \"../utils\";\nimport {\n    DEFAULT_TALK_OPTIONS,\n    EVENTS,\n    EVENTS_ERROR,\n    RTP_PAYLOAD_TYPE,\n    TALK_ENC_TYPE, TALK_ENGINE,\n    TALK_PACKET_TYPE,\n    WEBSOCKET_EVENTS,\n    WEBSOCKET_STATUS\n} from \"../constant\";\nimport Resampler from \"../utils/resampler\";\nimport {floatTo16BitPCM, floatTo8BitPCM} from \"../utils/arraybuffer\";\nimport {g711aEncoder, g711uEncoder} from \"../utils/g711\";\nimport Debug from \"../utils/debug\";\nimport Events from \"../utils/events\";\n\n\nexport default class Talk extends Emitter {\n    constructor(player, options = {}) {\n        super()\n        if (player) {\n            this.player = player;\n        }\n        this.tag = 'talk';\n        const defaultOptions = getDefaultTalkOptions();\n        this._opt = Object.assign({}, defaultOptions, options);\n        this._opt.sampleRate = parseInt(this._opt.sampleRate, 10);\n        this._opt.sampleBitsWidth = parseInt(this._opt.sampleBitsWidth, 10);\n        this.audioContext = null;\n        this.gainNode = null;\n        this.recorder = null;\n        this.workletRecorder = null;\n        this.biquadFilter = null;\n        this.userMediaStream = null;\n        // buffersize\n        this.bufferSize = 512;\n        this._opt.audioBufferLength = this.calcAudioBufferLength();\n        this.audioBufferList = [];\n        // socket\n        this.socket = null;\n        this.socketStatus = WEBSOCKET_STATUS.notConnect;\n\n        //\n        this.mediaStreamSource = null;\n        this.heartInterval = null;\n        this.checkGetUserMediaTimeout = null;\n        this.wsUrl = null;\n        this.startTimestamp = 0;\n\n        // 报文数据\n        this.sequenceId = 0;\n        this.tempTimestamp = null;\n        this.tempRtpBufferList = [];\n        this.events = new Events(this);\n\n        this._initTalk();\n        //\n        if (!this.player) {\n            this.debug = new Debug(this)\n        }\n\n        this.log(this.tag, 'init', this._opt)\n    }\n\n    destroy() {\n        //\n        if (this.userMediaStream) {\n            this.userMediaStream.getTracks && this.userMediaStream.getTracks().forEach((track) => {\n                track.stop()\n            })\n            this.userMediaStream = null;\n        }\n\n        if (this.mediaStreamSource) {\n            this.mediaStreamSource.disconnect();\n            this.mediaStreamSource = null;\n        }\n        if (this.recorder) {\n            this.recorder.disconnect();\n            this.recorder.onaudioprocess = null;\n        }\n\n        if (this.biquadFilter) {\n            this.biquadFilter.disconnect();\n            this.biquadFilter = null;\n        }\n\n        if (this.gainNode) {\n            this.gainNode.disconnect();\n            this.gainNode = null;\n        }\n\n        if (this.workletRecorder) {\n            this.workletRecorder.disconnect();\n            this.workletRecorder = null;\n        }\n\n        if (this.socket) {\n            if (this.socketStatus === WEBSOCKET_STATUS.open) {\n                this._sendClose();\n            }\n            this.socket.close();\n            this.socket = null;\n        }\n        this._stopHeartInterval();\n        this._stopCheckGetUserMediaTimeout();\n        this.audioContext = null;\n        this.gainNode = null;\n        this.recorder = null;\n        this.audioBufferList = [];\n        this.sequenceId = 0;\n        this.wsUrl = null;\n        this.tempTimestamp = null;\n        this.tempRtpBufferList = [];\n        this.startTimestamp = 0;\n\n        this.log('talk', 'destroy');\n    }\n\n    addRtpToBuffer(rtp) {\n        const len = rtp.length + this.tempRtpBufferList.length;\n        const buffer = new Uint8Array(len);\n        buffer.set(this.tempRtpBufferList, 0);\n        buffer.set(rtp, this.tempRtpBufferList.length);\n        this.tempRtpBufferList = buffer;\n        //console.log('addRtpToBuffer length and byteLength ', this.tempRtpBufferList.length, this.tempRtpBufferList.byteLength)\n    }\n\n    downloadRtpFile() {\n        const blob = new Blob([this.tempRtpBufferList]);\n        try {\n            const oa = document.createElement('a');\n            oa.href = window.URL.createObjectURL(blob);\n            oa.download = Date.now() + '.rtp';\n            oa.click();\n        } catch (e) {\n            console.error('downloadRtpFile', e);\n        }\n    }\n\n    calcAudioBufferLength() {\n        const {sampleRate, sampleBitsWidth} = this._opt;\n        return ((sampleRate * 8) * (20 / 1000)) / 8;\n    }\n\n    get socketStatusOpen() {\n        return this.socketStatus === WEBSOCKET_STATUS.open;\n    }\n\n    log(...args) {\n        this._log('log', ...args)\n    }\n\n    warn(...args) {\n        this._log('warn', ...args)\n    }\n\n    error(...args) {\n        this._log('error', ...args)\n    }\n\n    _log(type, ...args) {\n        if (this.player) {\n            this.player.debug[type](...args);\n\n        } else if (this.debug) {\n            this.debug[type](...args);\n        } else {\n            console[type](...args);\n        }\n    }\n\n    _getSequenceId() {\n        return ++this.sequenceId\n    }\n\n    _createWebSocket() {\n        return new Promise((resolve, reject) => {\n            const proxy = this.events.proxy;\n            this.socket = new WebSocket(this.wsUrl);\n            this.socket.binaryType = 'arraybuffer';\n            this.emit(EVENTS.talkStreamStart);\n\n            proxy(this.socket, WEBSOCKET_EVENTS.open, () => {\n                this.socketStatus = WEBSOCKET_STATUS.open;\n                this.log(this.tag, 'websocket open -> do talk');\n                this.emit(EVENTS.talkStreamOpen);\n                resolve();\n                this._doTalk();\n            })\n\n            proxy(this.socket, WEBSOCKET_EVENTS.message, (event) => {\n                this.log(this.tag, 'websocket message', event.data);\n            })\n\n            proxy(this.socket, WEBSOCKET_EVENTS.close, (e) => {\n                this.socketStatus = WEBSOCKET_STATUS.close;\n                this.log(this.tag, 'websocket close');\n                this.emit(EVENTS.talkStreamClose);\n                reject(e);\n            })\n            proxy(this.socket, WEBSOCKET_EVENTS.error, (error) => {\n                this.socketStatus = WEBSOCKET_STATUS.error;\n                this.error(this.tag, 'websocket error', error)\n                this.emit(EVENTS.talkStreamError, error);\n                reject(error);\n            })\n        })\n    }\n\n    _sendClose() {\n\n    }\n\n\n    _initTalk() {\n\n        this._initMethods();\n        if (this._opt.engine === TALK_ENGINE.worklet) {\n            this._initWorklet();\n        } else if (this._opt.engine === TALK_ENGINE.script) {\n            this._initScriptProcessor();\n        }\n        this.log(this.tag, 'audioContext samplerate', this.audioContext.sampleRate)\n    }\n\n    _initMethods() {\n        //\n        this.audioContext = new (window.AudioContext || window.webkitAudioContext)({sampleRate: 48000})\n        this.gainNode = this.audioContext.createGain();\n        // default 1\n        this.gainNode.gain.value = 1;\n\n        // 消音器\n        this.biquadFilter = this.audioContext.createBiquadFilter();\n        this.biquadFilter.type = \"lowpass\";\n        this.biquadFilter.frequency.value = 3000;\n\n        this.resampler = new Resampler({\n            fromSampleRate: this.audioContext.sampleRate,\n            toSampleRate: this._opt.sampleRate,\n            channels: this._opt.numberChannels,\n            inputBufferSize: this.bufferSize\n        })\n    }\n\n    _initScriptProcessor() {\n        //\n        const createScript = this.audioContext.createScriptProcessor || this.audioContext.createJavaScriptNode;\n        this.recorder = createScript.apply(this.audioContext, [this.bufferSize, this._opt.numberChannels, this._opt.numberChannels])\n        this.recorder.onaudioprocess = (e) => this._onaudioprocess(e);\n    }\n\n    _initWorklet() {\n        function workletProcess() {\n            class TalkProcessor extends AudioWorkletProcessor {\n                constructor(options) {\n                    super();\n                    this._cursor = 0;\n                    this._bufferSize = options.processorOptions.bufferSize;\n                    this._buffer = new Float32Array(this._bufferSize);\n                }\n\n                process(inputs, outputs, parameters) {\n                    if (!inputs.length || !inputs[0].length) {\n                        return true;\n                    }\n                    for (let i = 0; i < inputs[0][0].length; i++) {\n                        this._cursor += 1;\n                        if (this._cursor === this._bufferSize) {\n                            this._cursor = 0;\n                            this.port.postMessage({\n                                eventType: 'data',\n                                buffer: this._buffer\n                            });\n                        }\n                        this._buffer[this._cursor] = inputs[0][0][i];\n                    }\n\n                    return true;\n                }\n            }\n\n            registerProcessor('talk-processor', TalkProcessor)\n        }\n\n        this.audioContext.audioWorklet.addModule(createWorkletModuleUrl(workletProcess)).then(() => {\n            const workletNode = new AudioWorkletNode(this.audioContext, 'talk-processor', {\n                processorOptions: {\n                    bufferSize: this.bufferSize\n                }\n            })\n            workletNode.connect(this.gainNode);\n            workletNode.port.onmessage = (e) => {\n                if (e.data.eventType === 'data') {\n                    this._encodeAudioData(e.data.buffer);\n                }\n            }\n            this.workletRecorder = workletNode;\n        })\n    }\n\n\n    _onaudioprocess(e) {\n        // 数组里的每个数字都是32位的单精度浮点数\n        // 默认是单精度\n        const float32Array = e.inputBuffer.getChannelData(0);\n        // send 出去。\n        this._encodeAudioData(new Float32Array(float32Array));\n    }\n\n    _encodeAudioData(float32Array) {\n        // 没有说话\n        if (float32Array[0] === 0 && float32Array[1] === 0) {\n            this.log(this.tag, 'empty audio data')\n            return;\n        }\n\n        const resampleBuffer = this.resampler.resample(float32Array);\n        // default 32Bit\n        let tempArrayBuffer = resampleBuffer;\n        if (this._opt.sampleBitsWidth === 16) {\n            tempArrayBuffer = floatTo16BitPCM(resampleBuffer);\n        } else if (this._opt.sampleBitsWidth === 8) {\n            tempArrayBuffer = floatTo8BitPCM(resampleBuffer);\n        }\n\n        if (tempArrayBuffer.buffer !== null) {\n            let typedArray = null;\n            if (this._opt.encType === TALK_ENC_TYPE.g711a) {\n                typedArray = g711aEncoder(tempArrayBuffer)\n            } else if (this._opt.encType === TALK_ENC_TYPE.g711u) {\n                typedArray = g711uEncoder(tempArrayBuffer)\n            }\n            //\n            const unit8Array = Uint8Array.from(typedArray);\n            for (let i = 0; i < unit8Array.length; i++) {\n                let audioBufferLength = this.audioBufferList.length;\n                this.audioBufferList[audioBufferLength++] = unit8Array[i];\n                //\n                if (this.audioBufferList.length === this._opt.audioBufferLength) {\n                    this._sendTalkMsg(new Uint8Array(this.audioBufferList));\n                    this.audioBufferList = [];\n                }\n            }\n        }\n    }\n\n    _parseAudioMsg(typedArray) {\n        let typeArray2 = null;\n        // rtp reumx just support g711a or g711u\n        if (this._opt.packetType === TALK_PACKET_TYPE.rtp && (this._opt.encType === TALK_ENC_TYPE.g711a || this._opt.encType === TALK_ENC_TYPE.g711u)) {\n            typeArray2 = this.rtpPacket(typedArray);\n        } else if (this._opt.packetType === TALK_PACKET_TYPE.opus) {\n            typeArray2 = this.opusPacket(typedArray);\n        } else if(this._opt.packetType === TALK_PACKET_TYPE.empty){\n            // 默认\n            typeArray2 = typedArray;\n        }\n\n        return typeArray2;\n    }\n\n    rtpPacket(typedArray) {\n        const rtpHeader = [];\n        //2 bits RTP的版本，这里统一为2\n        const version = 2;\n        //1 bit 如果置1，在packet的末尾被填充，填充有时是方便一些针对固定长度的算法的封装\n        const padding = 0;\n        //1 bit 如果置1，在RTP Header会跟着一个header extension\n        const extension = 0;\n        //4 bits 表示头部后 特约信源 的个数\n        const csrcCount = 0;\n        //1 bit 不同的有效载荷有不同的含义，marker=1; 对于视频，标记一帧的结束；对于音频，标记会话的开始。\n        const marker = 1;\n        //7 bits 表示所传输的多媒体的类型，\n        let playloadType = 0;\n        //16 bits 每个RTP packet的sequence number会自动加一，以便接收端检测丢包情况\n        let sequenceNumber = 0;\n        //32 bits 时间戳\n        let timestamp = 0;\n        //32 bits 同步源的id，每两个同步源的id不能相同\n        const ssrc = this._opt.rtpSsrc;\n        //\n        const frameLen = typedArray.length;\n\n        if (this._opt.encType === TALK_ENC_TYPE.g711a) {\n            playloadType = RTP_PAYLOAD_TYPE.g711a;\n        } else if (this._opt.encType === TALK_ENC_TYPE.g711u) {\n            playloadType = RTP_PAYLOAD_TYPE.g711u;\n        }\n\n        if (!this.startTimestamp) {\n            this.startTimestamp = now();\n        }\n        timestamp = now() - this.startTimestamp;\n        sequenceNumber = this._getSequenceId();\n\n        // frame length\n        // 需要在rtp头前面加两个字节，表示数据包长度（整个rtp包长度）\n        // 国标流udp不需要两个字节长度\n        // 国标流tcp需要两个字节长度\n        // websocket目前是按照tcp的做法做的\n        const rtpFrameLen = frameLen + 12;\n        rtpHeader[0] = 0xFF & (rtpFrameLen >> 8);\n        rtpHeader[1] = 0xFF & (rtpFrameLen >> 0);\n\n        rtpHeader[2] = ((version << 6) + (padding << 5) + (extension << 4) + csrcCount);\n        rtpHeader[3] = ((marker << 7) + playloadType);\n        rtpHeader[4] = (sequenceNumber / (0xff + 1));\n        rtpHeader[5] = (sequenceNumber % (0xff + 1));\n        rtpHeader[6] = ((timestamp / (0xffff + 1)) / (0xff + 1));\n        rtpHeader[7] = ((timestamp / (0xffff + 1)) % (0xff + 1));\n        rtpHeader[8] = ((timestamp % (0xffff + 1)) / (0xff + 1));\n        rtpHeader[9] = ((timestamp % (0xffff + 1)) % (0xff + 1));\n        rtpHeader[10] = ((ssrc / (0xffff + 1)) / (0xff + 1));\n        rtpHeader[11] = ((ssrc / (0xffff + 1)) % (0xff + 1));\n        rtpHeader[12] = ((ssrc % (0xffff + 1)) / (0xff + 1));\n        rtpHeader[13] = ((ssrc % (0xffff + 1)) % (0xff + 1));\n\n        let typeArray2 = rtpHeader.concat([...typedArray]);\n\n        let binary = new Uint8Array(typeArray2.length);\n        for (let ii = 0; ii < typeArray2.length; ii++) {\n            binary[ii] = typeArray2[ii];\n        }\n\n        return binary;\n    }\n\n\n    opusPacket(typedArray) {\n        //TODO:待完成\n\n        return typedArray;\n    }\n\n    _sendTalkMsg(typedArray) {\n        if (this.tempTimestamp === null) {\n            this.tempTimestamp = now();\n        }\n        const timestamp = now();\n        const diff = timestamp - this.tempTimestamp;\n        const typedArray2 = this._parseAudioMsg(typedArray)\n        this.log(this.tag, `'send talk msg and diff is ${diff} and byteLength is ${typedArray2.byteLength} and length is ${typedArray2.length}, and g711 length is ${typedArray.length}`);\n        if (this._opt.packetType === TALK_PACKET_TYPE.rtp) {\n            this.addRtpToBuffer(typedArray2);\n        }\n        if (typedArray2) {\n            if (this.socketStatusOpen) {\n                this.socket.send(typedArray2.buffer);\n            } else {\n                this.emit(EVENTS_ERROR.tallWebsocketClosedByError);\n            }\n        }\n        this.tempTimestamp = timestamp;\n    }\n\n    _doTalk() {\n        this._getUserMedia();\n        // this._getUserMedia2();\n        // this._getUserMedia3();\n    }\n\n    _getUserMedia() {\n        this.log(this.tag, 'getUserMedia')\n        // 老的浏览器可能根本没有实现 mediaDevices，所以我们可以先设置一个空的对象\n        if (window.navigator.mediaDevices === undefined) {\n            window.navigator.mediaDevices = {};\n        }\n\n        // 一些浏览器部分支持 mediaDevices。我们不能直接给对象设置 getUserMedia\n        // 因为这样可能会覆盖已有的属性。这里我们只会在没有 getUserMedia 属性的时候添加它。\n        if (window.navigator.mediaDevices.getUserMedia === undefined) {\n            this.log(this.tag, 'window.navigator.mediaDevices.getUserMedia is undefined and init function')\n            window.navigator.mediaDevices.getUserMedia = function (constraints) {\n                // 首先，如果有 getUserMedia 的话，就获得它\n                var getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;\n\n                // 一些浏览器根本没实现它 - 那么就返回一个 error 到 promise 的 reject 来保持一个统一的接口\n                // 由于受浏览器的限制，navigator.mediaDevices.getUserMedia在https协议下是可以正常使用的，\n                // 而在http协议下只允许localhost/127.0.0.1这两个域名访问，\n                // 因此在开发时应做好容灾处理，上线时则需要确认生产环境是否处于https协议下。\n                if (!getUserMedia) {\n                    return Promise.reject(new Error('getUserMedia is not implemented in this browser'));\n                }\n\n                // 否则，为老的 navigator.getUserMedia 方法包裹一个 Promise\n                return new Promise(function (resolve, reject) {\n                    getUserMedia.call(navigator, constraints, resolve, reject);\n                });\n            }\n        }\n\n        if (this._opt.checkGetUserMediaTimeout) {\n            this._startCheckGetUserMediaTimeout();\n        }\n        window.navigator.mediaDevices.getUserMedia({\n            audio: {\n                latency: true,\n                noiseSuppression: true,\n                autoGainControl: true,\n                echoCancellation: true,\n                sampleRate: 48000,\n                channelCount: 1\n            },\n            video: false\n        }).then((stream) => {\n            this.log(this.tag, 'getUserMedia success')\n            this.userMediaStream = stream;\n            this.mediaStreamSource = this.audioContext.createMediaStreamSource(stream)\n            this.mediaStreamSource.connect(this.biquadFilter);\n            if (this.recorder) {\n                this.biquadFilter.connect(this.recorder)\n                this.recorder.connect(this.gainNode);\n            } else if (this.workletRecorder) {\n                this.biquadFilter.connect(this.workletRecorder)\n                this.workletRecorder.connect(this.gainNode);\n            }\n\n            this.gainNode.connect(this.audioContext.destination);\n            this.emit(EVENTS.talkGetUserMediaSuccess);\n\n            // check stream inactive\n            if (stream.oninactive === null) {\n                stream.oninactive = (e) => {\n                    this._handleStreamInactive(e);\n                }\n            }\n        }).catch((e) => {\n            this.error(this.tag, 'getUserMedia error', e.toString());\n            this.emit(EVENTS.talkGetUserMediaFail, e.toString());\n        }).finally(() => {\n            this.log(this.tag, 'getUserMedia finally');\n            this._stopCheckGetUserMediaTimeout();\n        })\n    }\n\n\n    _getUserMedia2() {\n        this.log(this.tag, 'getUserMedia')\n        navigator.mediaDevices ?\n            navigator.mediaDevices.getUserMedia(\n                {audio: true}).then(\n                (stream) => {\n                    this.log(this.tag, 'getUserMedia2 success')\n                }\n            ) :\n            navigator.getUserMedia(\n                {audio: true},\n                this.log(this.tag, 'getUserMedia2 success'),\n                this.log(this.tag, 'getUserMedia2 fail')\n            );\n    }\n\n    async _getUserMedia3() {\n        this.log(this.tag, 'getUserMedia3')\n        try {\n            const stream = await navigator.mediaDevices.getUserMedia({\n                audio: {\n                    latency: true,\n                    noiseSuppression: true,\n                    autoGainControl: true,\n                    echoCancellation: true,\n                    sampleRate: 48000,\n                    channelCount: 1\n                },\n                video: false\n            });\n            console.log('getUserMedia() got stream:', stream);\n            this.log(this.tag, 'getUserMedia3 success')\n        } catch (e) {\n            this.log(this.tag, 'getUserMedia3 fail')\n        }\n    }\n\n    _handleStreamInactive(e) {\n        if (this.userMediaStream) {\n            this.error(this.tag, 'stream oninactive')\n            this.emit(EVENTS.talkStreamInactive);\n        }\n\n    }\n\n    _startCheckGetUserMediaTimeout() {\n        this._stopCheckGetUserMediaTimeout();\n        this.checkGetUserMediaTimeout = setTimeout(() => {\n            this.log(this.tag, 'check getUserMedia timeout')\n            this.emit(EVENTS.talkGetUserMediaTimeout);\n        }, this._opt.getUserMediaTimeout)\n    }\n\n    _stopCheckGetUserMediaTimeout() {\n        if (this.checkGetUserMediaTimeout) {\n            this.log(this.tag, 'stop checkGetUserMediaTimeout')\n            clearTimeout(this.checkGetUserMediaTimeout);\n            this.checkGetUserMediaTimeout = null;\n        }\n    }\n\n    _startHeartInterval() {\n        // 定时发送心跳，\n        this.heartInterval = setInterval(() => {\n            this.log(this.tag, 'heart interval');\n            let data = [0x23, 0x24, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00];\n            data = new Uint8Array(data);\n            this.socket.send(data.buffer);\n        }, 15 * 1000);\n    }\n\n    _stopHeartInterval() {\n        if (this.heartInterval) {\n            this.log(this.tag, 'stop heart interval');\n            clearInterval(this.heartInterval);\n            this.heartInterval = null;\n        }\n    }\n\n\n    startTalk(wsUrl) {\n        return new Promise((resolve, reject) => {\n            if (!isSupportGetUserMedia()) {\n                return reject('not support getUserMedia');\n            }\n            this.wsUrl = wsUrl;\n\n            if (this._opt.testMicrophone) {\n                this._doTalk();\n                return resolve();\n            }\n\n            this._createWebSocket().catch((e) => {\n                reject(e)\n            });\n\n            // reject\n            this.once(EVENTS.talkGetUserMediaFail, () => {\n                reject('getUserMedia fail');\n            })\n            // only get user media success and resolve\n            this.once(EVENTS.talkGetUserMediaSuccess, () => {\n                resolve()\n            })\n        })\n\n    }\n\n    setVolume(volume) {\n        volume = parseFloat(volume).toFixed(2);\n        if (isNaN(volume)) {\n            return;\n        }\n        volume = clamp(volume, 0, 1);\n        this.gainNode.gain.value = volume;\n    }\n\n    getOption() {\n        return this._opt;\n    }\n\n    get volume() {\n        return this.gainNode ? parseFloat(this.gainNode.gain.value * 100).toFixed(0) : null;\n    }\n}\n","import Emitter from \"./utils/emitter\";\nimport {EVENTS, TALK_EVENTS} from \"./constant\";\nimport Talk from \"./talk\";\nimport Debug from \"./utils/debug\";\nimport {clone} from \"./utils\";\n\n\nclass JessibucaProTalk extends Emitter {\n    constructor(options = {}) {\n        super();\n        this.talk = null;\n        this._opt = options;\n        this.LOG_TAG = 'talk';\n\n        this.debug = new Debug(this);\n    }\n\n    destroy() {\n        this.off();\n        if (this.talk) {\n            this.talk.destroy();\n            this.talk = null;\n        }\n    }\n\n\n    _initTalk(options = {}) {\n        if (this.talk) {\n            this.talk.destroy();\n            this.talk = null;\n        }\n\n        const opt = Object.assign({}, clone(this._opt), options);\n        this.talk = new Talk(null, opt)\n        this.debug.log(this.LOG_TAG, '_initTalk', this.talk.getOption())\n        this._bindTalkEvents();\n    }\n\n    _bindTalkEvents() {\n        // 对外的事件\n        Object.keys(TALK_EVENTS).forEach((key) => {\n            this.talk.on(TALK_EVENTS[key], (value) => {\n                this.emit(key, value)\n            })\n        })\n    }\n\n    /**\n     *\n     * @param wsUrl\n     * @param options\n     * @returns {Promise<unknown>}\n     */\n    startTalk(wsUrl, options = {}) {\n        return new Promise((resolve, reject) => {\n            this._initTalk(options)\n\n            this.talk.startTalk(wsUrl).then(() => {\n                resolve()\n\n                this.talk.once(EVENTS.talkStreamClose, () => {\n                    this.stopTalk().catch((e) => {\n\n                    });\n                })\n                this.talk.once(EVENTS.talkStreamError, () => {\n                    this.stopTalk().catch((e) => {\n\n                    });\n                })\n\n                this.talk.once(EVENTS.talkStreamInactive, () => {\n                    this.stopTalk().catch((e) => {\n\n                    });\n                })\n\n            }).catch((e) => {\n                reject(e)\n            })\n        })\n    }\n\n\n    /**\n     *\n     * @returns {Promise<unknown>}\n     */\n    stopTalk() {\n        return new Promise((resolve, reject) => {\n            if (!this.talk) {\n                reject('talk is not init');\n            }\n            this.talk.destroy();\n            resolve();\n        })\n    }\n\n    /**\n     *\n     * @returns {Promise<unknown>}\n     */\n    getTalkVolume() {\n        return new Promise((resolve, reject) => {\n            if (!this.talk) {\n                reject('talk is not init')\n            }\n            let result = this.talk.volume;\n            resolve(result);\n        })\n    }\n\n    /**\n     *\n     * @param volume\n     * @returns {Promise<unknown>}\n     */\n    setTalkVolume(volume) {\n        return new Promise((resolve, reject) => {\n            if (!this.talk) {\n                reject('talk is not init')\n            }\n            this.talk.setVolume(volume / 100);\n            resolve();\n        })\n    }\n\n    downloadTempRtpFile() {\n        return new Promise((resolve, reject) => {\n            if (this.talk) {\n                this.talk.downloadRtpFile();\n                resolve();\n            } else {\n                reject('talk is not init')\n            }\n        })\n\n    }\n}\n\nJessibucaProTalk.EVENTS = TALK_EVENTS;\n\nwindow.JessibucaProTalk = JessibucaProTalk;\n"],"names":["Emitter","on","name","fn","ctx","e","push","once","self","listener","off","args","apply","_","emit","evtArr","slice","data","i","length","callback","Object","keys","forEach","key","evts","liveEvents","len","DEBUG_LEVEL","debug","warn","EVENTS","fullscreen","webFullscreen","decoderWorkerInit","play","playing","pause","mute","load","loading","zooming","videoInfo","timeUpdate","audioInfo","log","error","kBps","timeout","delayTimeout","delayTimeoutRetryEnd","loadingTimeout","loadingTimeoutRetryEnd","stats","performance","faceDetectActive","objectDetectActive","record","recording","recordingTimestamp","recordStart","recordEnd","recordCreateError","recordBlob","buffer","videoFrame","start","metadata","resize","volumechange","destroy","beforeDestroy","streamEnd","streamRate","streamAbps","streamVbps","streamDts","streamSuccess","streamMessage","streamError","streamStats","mseSourceOpen","mseSourceClose","mseSourceended","mseSourceBufferError","mseSourceBufferBusy","mseSourceBufferFull","videoWaiting","videoTimeUpdate","videoSyncAudio","playToRenderTimes","playbackTime","playbackTimestamp","playbackPrecision","playbackJustTime","playbackStats","playbackSeek","playbackPause","playbackPauseOrResume","playbackRateChange","playbackPreRateChange","ptz","streamQualityChange","visibilityChange","netBuf","close","networkDelayTimeout","togglePerformancePanel","viewResizeChange","flvDemuxBufferSizeTooLarge","talkGetUserMediaSuccess","talkGetUserMediaFail","talkGetUserMediaTimeout","talkStreamStart","talkStreamOpen","talkStreamClose","talkStreamError","talkStreamInactive","webrtcDisconnect","webrtcFailed","webrtcClosed","crashLog","focus","blur","visibilityHiddenTimeout","websocketOpen","websocketClose","websocketError","websocketMessage","aiObjectDetectorInfo","aiFaceDetector","playFailedAndPaused","TALK_EVENTS","EVENTS_ERROR","playError","fetchError","webcodecsH265NotSupport","webcodecsDecodeError","mediaSourceH265NotSupport","mediaSourceDecoderConfigurationError","mediaSourceFull","mediaSourceAppendBufferError","mediaSourceBufferListLarge","mediaSourceAppendBufferEndTimeout","mediaSourceTsIsMaxDiff","wasmDecodeError","hlsError","webrtcError","webglAlignmentError","webcodecsWidthOrHeightChange","tallWebsocketClosedByError","wasmDecodeVideoNoResponseError","audioChannelError","simdH264DecodeVideoWidthIsTooLarge","WEBSOCKET_STATUS","notConnect","open","TALK_ENC_TYPE","g711a","g711u","RTP_PAYLOAD_TYPE","pcma","pcmu","jpeg","h264","h265","opus","TALK_PACKET_TYPE","empty","rtp","WEBSOCKET_EVENTS","message","TALK_ENGINE","worklet","script","DEFAULT_TALK_OPTIONS","encType","packetType","rtpSsrc","numberChannels","sampleRate","sampleBitsWidth","debugLevel","testMicrophone","audioBufferLength","engine","checkGetUserMediaTimeout","getUserMediaTimeout","now","Date","getTime","WebAssembly","instantiate","module","Module","Uint8Array","of","Instance","clamp","num","a","b","Math","max","min","isFunction","isSupportGetUserMedia","result","navigator","window","mediaDevices","getUserMedia","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","createWorkletModuleUrl","func","functionToString","str","trim","match","funcStr","toString","blob","Blob","type","URL","createObjectURL","clone","obj","JSON","stringify","parse","getDefaultTalkOptions","Resampler","constructor","options","fromSampleRate","toSampleRate","channels","inputBufferSize","Error","resampler","initialize","ratioWeight","linearInterpolation","lastWeight","multiTap","tailExists","initializeBuffers","bufferSlice","sliceAmount","outputBuffer","subarray","outputBufferSize","ceil","Float32Array","lastOutput","bufferLength","outLength","weight","firstWeight","secondWeight","sourceOffset","outputOffset","channel","floor","output_variable_list","actualPosition","amountToNext","alreadyProcessedTail","currentPosition","resample","floatTo16BitPCM","input","output","Int16Array","s","floatTo8BitPCM","Int8Array","temp","parseInt","QUANT_MASK","SEG_SHIFT","BIAS","segEnd","_search","val","table","size","_linear2alaw","pcmVal","mask","seg","aval","_linear2ulaw","uval","g711aEncoder","typedArray","g711Array","tempArray","Array","prototype","call","index","g711uEncoder","Debug","master","_opt","prefix","debugUuid","console","Events","destroys","proxy","bind","target","option","isArray","map","item","addEventListener","removeEventListener","event","Talk","player","tag","defaultOptions","assign","audioContext","gainNode","recorder","workletRecorder","biquadFilter","userMediaStream","bufferSize","calcAudioBufferLength","audioBufferList","socket","socketStatus","mediaStreamSource","heartInterval","wsUrl","startTimestamp","sequenceId","tempTimestamp","tempRtpBufferList","events","_initTalk","getTracks","track","stop","disconnect","onaudioprocess","_sendClose","_stopHeartInterval","_stopCheckGetUserMediaTimeout","addRtpToBuffer","set","downloadRtpFile","oa","document","createElement","href","download","click","socketStatusOpen","_log","_getSequenceId","_createWebSocket","Promise","resolve","reject","WebSocket","binaryType","_doTalk","_initMethods","_initWorklet","_initScriptProcessor","AudioContext","webkitAudioContext","createGain","gain","value","createBiquadFilter","frequency","createScript","createScriptProcessor","createJavaScriptNode","_onaudioprocess","workletProcess","TalkProcessor","AudioWorkletProcessor","_cursor","_bufferSize","processorOptions","_buffer","process","inputs","outputs","parameters","port","postMessage","eventType","registerProcessor","audioWorklet","addModule","then","workletNode","AudioWorkletNode","connect","onmessage","_encodeAudioData","float32Array","inputBuffer","getChannelData","resampleBuffer","tempArrayBuffer","unit8Array","from","_sendTalkMsg","_parseAudioMsg","typeArray2","rtpPacket","opusPacket","rtpHeader","version","padding","extension","csrcCount","marker","playloadType","sequenceNumber","timestamp","ssrc","frameLen","rtpFrameLen","concat","binary","ii","diff","typedArray2","byteLength","send","_getUserMedia","undefined","constraints","_startCheckGetUserMediaTimeout","audio","latency","noiseSuppression","autoGainControl","echoCancellation","channelCount","video","stream","createMediaStreamSource","destination","oninactive","_handleStreamInactive","catch","finally","_getUserMedia2","_getUserMedia3","setTimeout","clearTimeout","_startHeartInterval","setInterval","clearInterval","startTalk","setVolume","volume","parseFloat","toFixed","isNaN","getOption","JessibucaProTalk","talk","LOG_TAG","opt","_bindTalkEvents","stopTalk","getTalkVolume","setTalkVolume","downloadTempRtpFile"],"mappings":"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"}